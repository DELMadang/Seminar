<!DOCTYPE html><html><head>
      <title>Seminar_20250723</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="file:///c:\Users\civilian\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.18\crossnote\dependencies\katex\katex.min.css">
      
      
      <script type="text/javascript" src="file:///c:\Users\civilian\.vscode\extensions\shd101wyy.markdown-preview-enhanced-0.8.18\crossnote\dependencies\mermaid\mermaid.min.js" charset="UTF-8"></script>
      
      
      <style>
      code[class*=language-],pre[class*=language-]{color:#333;background:0 0;font-family:Consolas,"Liberation Mono",Menlo,Courier,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.4;-moz-tab-size:8;-o-tab-size:8;tab-size:8;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:.8em;overflow:auto;border-radius:3px;background:#f5f5f5}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;background:#f5f5f5}.token.blockquote,.token.comment{color:#969896}.token.cdata{color:#183691}.token.doctype,.token.macro.property,.token.punctuation,.token.variable{color:#333}.token.builtin,.token.important,.token.keyword,.token.operator,.token.rule{color:#a71d5d}.token.attr-value,.token.regex,.token.string,.token.url{color:#183691}.token.atrule,.token.boolean,.token.code,.token.command,.token.constant,.token.entity,.token.number,.token.property,.token.symbol{color:#0086b3}.token.prolog,.token.selector,.token.tag{color:#63a35c}.token.attr-name,.token.class,.token.class-name,.token.function,.token.id,.token.namespace,.token.pseudo-class,.token.pseudo-element,.token.url-reference .token.variable{color:#795da3}.token.entity{cursor:help}.token.title,.token.title .token.punctuation{font-weight:700;color:#1d3e81}.token.list{color:#ed6a43}.token.inserted{background-color:#eaffea;color:#55a532}.token.deleted{background-color:#ffecec;color:#bd2c00}.token.bold{font-weight:700}.token.italic{font-style:italic}.language-json .token.property{color:#183691}.language-markup .token.tag .token.punctuation{color:#333}.language-css .token.function,code.language-css{color:#0086b3}.language-yaml .token.atrule{color:#63a35c}code.language-yaml{color:#183691}.language-ruby .token.function{color:#333}.language-markdown .token.url{color:#795da3}.language-makefile .token.symbol{color:#795da3}.language-makefile .token.variable{color:#183691}.language-makefile .token.builtin{color:#0086b3}.language-bash .token.keyword{color:#0086b3}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:hsla(24,20%,50%,.08);background:linear-gradient(to right,hsla(24,20%,50%,.1) 70%,hsla(24,20%,50%,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:hsla(24,20%,50%,.4);color:#f4f1ef;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px #fff}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:'Helvetica Neue',Helvetica,'Segoe UI',Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ol,html body>ul{margin-bottom:16px}html body ol,html body ul{padding-left:2em}html body ol.no-list,html body ul.no-list{padding:0;list-style-type:none}html body ol ol,html body ol ul,html body ul ol,html body ul ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;background-color:#f0f0f0;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:700;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:700}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::after,html body code::before{letter-spacing:-.2em;content:'\00a0'}html body pre>code{padding:0;margin:0;word-break:normal;white-space:pre;background:0 0;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:after,html body pre code:before,html body pre tt:after,html body pre tt:before{content:normal}html body blockquote,html body dl,html body ol,html body p,html body pre,html body ul{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body code,html body pre{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview ul{list-style:disc}.markdown-preview ul ul{list-style:circle}.markdown-preview ul ul ul{list-style:square}.markdown-preview ol{list-style:decimal}.markdown-preview ol ol,.markdown-preview ul ol{list-style-type:lower-roman}.markdown-preview ol ol ol,.markdown-preview ol ul ol,.markdown-preview ul ol ol,.markdown-preview ul ul ol{list-style-type:lower-alpha}.markdown-preview .newpage,.markdown-preview .pagebreak{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center!important}.markdown-preview:not([data-for=preview]) .code-chunk .code-chunk-btn-group{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .status{display:none}.markdown-preview:not([data-for=preview]) .code-chunk .output-div{margin-bottom:16px}.markdown-preview .md-toc{padding:0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link div,.markdown-preview .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}.markdown-preview .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0;min-height:100vh}@media screen and (min-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode]) .markdown-preview{font-size:14px!important;padding:1em}}@media print{html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for=html-export]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,.66);border:4px solid rgba(150,150,150,.66);background-clip:content-box}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc{padding:0 16px}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link{display:inline;padding:.25rem 0}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link div,html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper .md-toc-link p{display:inline}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc .md-toc .md-toc-link-wrapper.highlighted .md-toc-link{font-weight:800}html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% - 300px);padding:2em calc(50% - 457px - 300px / 2);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for=html-export]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for=html-export]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
      <!-- The content below will be included at the end of the <head> element. --><script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    // your code here
  });
</script></head><body for="html-export">
    
    
      <div class="crossnote markdown-preview  ">
      
<h2 id="ë¸íŒŒì´-horseë¥¼-í™œìš©í•œ-rest-ì„œë²„-êµ¬í˜„-ì„¸ë¯¸ë‚˜">ë¸íŒŒì´ Horseë¥¼ í™œìš©í•œ REST ì„œë²„ êµ¬í˜„ ì„¸ë¯¸ë‚˜ </h2>
<h3 id="0-ì„¸ë¯¸ë‚˜-ê°œìš”"><strong>0. ì„¸ë¯¸ë‚˜ ê°œìš”</strong> </h3>
<h4 id="01-ê°œìš”">0.1 ê°œìš” </h4>
<p><strong>ì´ ì†Œìš”ì‹œê°„</strong>: 2ì‹œê°„ (120ë¶„)<br>
<strong>ëŒ€ìƒ</strong>: ë¸íŒŒì´ ê°œë°œ ê²½í—˜ì´ ìˆëŠ” ê°œë°œì<br>
<strong>ëª©í‘œ</strong>: Horse í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ë¬´ì—ì„œ í™œìš© ê°€ëŠ¥í•œ REST API ì„œë²„ êµ¬ì¶•</p>
<h4 id="02-í•„ìš”í•œ-ì‚¬ì „-ì¤€ë¹„ì‚¬í•­">0.2 í•„ìš”í•œ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­ </h4>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤: <a href="https://mariadb.org/download/">MariaDB</a></li>
<li>ì¿¼ë¦¬ ë¸Œë¼ìš°ì €: <a href="https://dbeaver.io/download/">DBEaver</a></li>
</ul>
<h4 id="03-ê°œë°œ-ë„êµ¬">0.3 ê°œë°œ ë„êµ¬ </h4>
<ul>
<li>Delphi XE8 ì´ìƒ</li>
</ul>
<h3 id="1-rest-api-ê°œìš”"><strong>1. REST API ê°œìš”</strong> </h3>
<h4 id="11-rest-apië€">1.1 REST APIë€? </h4>
<p><strong>REST API</strong>ëŠ” ì›¹ì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê¸° ìœ„í•œ í‘œì¤€ ê·œì¹™ì…ë‹ˆë‹¤.<br>
ë§ˆì¹˜ ë ˆìŠ¤í† ë‘ì˜ ë©”ë‰´íŒì²˜ëŸ¼, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ "ì´ëŸ° ë°ì´í„°ë¥¼ ë‹¬ë¼" ë˜ëŠ” "ì´ëŸ° ì‘ì—…ì„ í•´ë‹¬ë¼"ê³  ìš”ì²­í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ë©°, í†µì‹  í”„ë¡œí† ì½œì€ HTTP/HTTPSë¥¼ ë°ì´í„°ëŠ” JSONì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<blockquote>
<p><strong>REST</strong> = <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer(í‘œí˜„ ìƒíƒœ ì „ì´)</p>
</blockquote>
<h4 id="12-rest-apiì˜-í•µì‹¬-êµ¬ì¡°">1.2 REST APIì˜ í•µì‹¬ êµ¬ì¡° </h4>
<p>HTTP ë©”ì†Œë“œ + URL = ì‘ì—… ì •ì˜</p>
<table>
  <tbody><tr><th width="400px">ìš”ì²­</th>
  <th width="200px">ì˜ë¯¸</th>
  </tr><tr>
    <td><b>GET</b> /users</td>
    <td>ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>GET /users/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>POST /users</td>
    <td>ìƒˆ ì‚¬ìš©ì ìƒì„±</td>
  </tr>
  <tr>
    <td>PUTT /user/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ìˆ˜ì •</td>
  </tr>
  <tr>
    <td>DELETE /user/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ì‚­ì œ</td>
  </tr>
</tbody></table>
<h4 id="13-rest-apiì˜-5ê°€ì§€-í•µì‹¬-ì›ì¹™">1.3 REST APIì˜ 5ê°€ì§€ í•µì‹¬ ì›ì¹™ </h4>
<h5 id="131-ë¦¬ì†ŒìŠ¤-ì¤‘ì‹¬-ì„¤ê³„">1.3.1 ë¦¬ì†ŒìŠ¤ ì¤‘ì‹¬ ì„¤ê³„ </h5>
<p>HTTP ë©”ì†Œë“œëŠ” ë™ì‚¬ë¡œ, URLì€ ëª…ì‚¬ë¡œ í‘œí˜„í•œë‹¤</p>
<table>
  <tbody><tr><th width="400px">ìš”ì²­</th>
  <th width="200px">ë¹„ê³ </th>
  </tr><tr>
    <td>GET /books/123</td>
    <td>ì¢‹ì€ ì˜ˆ</td>
  </tr>
  <tr>
    <td>GET /getBook/123</td>
    <td>ë‚˜ìœ ì˜ˆ</td>
  </tr>
</tbody></table>
<h5 id="132-ë¬´ìƒíƒœstateless">1.3.2 ë¬´ìƒíƒœ(Stateless) </h5>
<p>ì„œë²„ëŠ” ì´ì „ ìš”ì²­ì„ ê¸°ì–µí•˜ì§€ ì•ŠìŒ. ë§¤ ìš”ì²­ë§ˆë‹¤ í•„ìš”í•œ ëª¨ë“  ì •ë³´ í¬í•¨í•´ì•¼ í•œë‹¤</p>
<blockquote>
<p>ë§¤ë²ˆ ì¸ì¦ í† í° í¬í•¨<br>
GET /api/users<br>
Authorization: Bearer abc123token</p>
</blockquote>
<h5 id="133-í‘œì¤€-http-ë©”ì†Œë“œ-ì‚¬ìš©">1.3.3 í‘œì¤€ HTTP ë©”ì†Œë“œ ì‚¬ìš© </h5>
<table>
  <tbody><tr><th width="400px">ë©”ì†Œë“œ</th>
  <th width="200px">ì˜ë¯¸</th>
  </tr><tr>
    <td>GET</td>
    <td>ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>POST</td>
    <td>ìƒì„±</td>
  </tr>
  <tr>
    <td>PUT</td>
    <td>ìˆ˜ì •</td>
  </tr>
  <tr>
    <td>DELETE</td>
    <td>ì‚­ì œ</td>
  </tr>
</tbody></table>
<h5 id="134-ê³„ì¸µí™”ëœ-êµ¬ì¡°">1.3.4 ê³„ì¸µí™”ëœ êµ¬ì¡° </h5>
<p>í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ëª°ë¼ë„ ë¨</p>
<div class="mermaid">flowchart TD
    %% í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ
    A1[ğŸ–¥ï¸ ì›¹ ë¸Œë¼ìš°ì €] --&gt; C[âš–ï¸ ë¡œë“œë°¸ëŸ°ì„œ ]
    A2[ğŸ“± ëª¨ë°”ì¼ ì•±] --&gt; C
    A3[ğŸ’» ë°ìŠ¤í¬í†± ì•±] --&gt; C
    
    %% ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì„œë²„ë“¤ë¡œ ë¶„ì‚°
    C --&gt; |íŠ¸ë˜í”½ ë¶„ì‚°| D1[ğŸ–¥ï¸ ì„œë²„ 1]
    C --&gt; |íŠ¸ë˜í”½ ë¶„ì‚°| D2[ğŸ–¥ï¸ ì„œë²„ 2]
    C --&gt; |íŠ¸ë˜í”½ ë¶„ì‚°| D3[ğŸ–¥ï¸ ì„œë²„ 3]
    
    %% ì„œë²„ë“¤ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼
    D1 --&gt; E[ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤&lt;br/&gt;RDBMS or NoSQL ]
    D2 --&gt; E
    D3 --&gt; E
    
    %% ìŠ¤íƒ€ì¼ ì •ì˜
    classDef client fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef gateway fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef loadbalancer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef server fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef database fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    
    class A1,A2,A3 client
    class B gateway
    class C loadbalancer
    class D1,D2,D3 server
    class E database
</div><h5 id="135-ìºì‹œ-ê°€ëŠ¥">1.3.5 ìºì‹œ ê°€ëŠ¥ </h5>
<p>GET ìš”ì²­ ê²°ê³¼ëŠ” ìºì‹œí•˜ì—¬ ì„±ëŠ¥ í–¥ìƒ</p>
<blockquote>
<p>Cache-Control: max-age=3600<br>
ETag: "abc123"</p>
</blockquote>
<h3 id="2-horse-í”„ë ˆì„ì›Œí¬-ì†Œê°œ"><strong>2. HORSE í”„ë ˆì„ì›Œí¬ ì†Œê°œ</strong> </h3>
<h4 id="21-horse-í”„ë ˆì„ì›Œí¬-íŠ¹ì§•">2.1 Horse í”„ë ˆì„ì›Œí¬ íŠ¹ì§• </h4>
<h5 id="211-ê²½ëŸ‰í™”ì™€-ê³ ì„±ëŠ¥">2.1.1 ê²½ëŸ‰í™”ì™€ ê³ ì„±ëŠ¥ </h5>
<ul>
<li>ë„¤ì´í‹°ë¸Œ ì»´íŒŒì¼</li>
<li>ë©”ëª¨ë¦¬ íš¨ìœ¨ (ë§¤ìš° ì ì€ ë©”ëª¨ë¦¬ë§Œ ì‚¬ìš©í•œë‹¤)</li>
<li>ë¹ ë¥¸ ì‹¤í–‰ ì†ë„</li>
<li>ê²½ëŸ‰í™”ëœ ì›¹ í”„ë ˆì„ì›Œí¬</li>
<li>ê°„ë‹¨í•œ ë¼ìš°íŒ… ì‹œìŠ¤í…œ</li>
</ul>
<h5 id="212-ê°„ë‹¨í•˜ê³ -ì§ê´€ì ì¸-ë¬¸ë²•">2.1.2 ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ ë¬¸ë²• </h5>
<ul>
<li>í•™ìŠµ ê³¡ì„ ì´ ë‚®ìŒ</li>
<li>Nodeì˜ Expressì™€ ìœ ì‚¬</li>
<li>ê°€ë…ì„±ì´ ì¢‹ìŒ.</li>
</ul>
<h5 id="213-ë‹¤ì–‘í•˜ê³ -ê°•ë ¥í•œ-ë¯¸ë“¤ì›¨ì–´-ì‹œìŠ¤í…œ">2.1.3 ë‹¤ì–‘í•˜ê³  ê°•ë ¥í•œ ë¯¸ë“¤ì›¨ì–´ ì‹œìŠ¤í…œ </h5>
<ul>
<li>ëª¨ë“ˆí™”: ê¸°ëŠ¥ë³„ë¡œ ë¯¸ë“¤ì›¨ì–´ ë¶„ë¦¬</li>
<li>ì¬ì‚¬ìš©ì„±: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ë™ì¼í•œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©</li>
<li>í™•ì¥ì„±: í•„ìš”í•œ ë¯¸ë“¤ì›¨ì–´ë§Œ ì¶”ê°€/ì œê±° ê°€ëŠ¥</li>
</ul>
<h5 id="214-ë‹¤ì–‘í•œ-os-ì§€ì›">2.1.4 ë‹¤ì–‘í•œ OS ì§€ì› </h5>
<ul>
<li>Windows</li>
<li>Linux</li>
<li>macOS</li>
</ul>
<h5 id="215-ë¸íŒŒì´-ìƒíƒœê³„ì™€ì˜-í†µí•©">2.1.5 ë¸íŒŒì´ ìƒíƒœê³„ì™€ì˜ í†µí•© </h5>
<ul>
<li>ê¸°ì¡´ ë¸íŒŒì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
<li>FireDAC, UniDAC ë“± ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
</ul>
<h5 id="216-ê°„í¸í•œ-ë°°í¬ì™€-ìš´ì˜">2.1.6 ê°„í¸í•œ ë°°í¬ì™€ ìš´ì˜ </h5>
<ul>
<li>ë‹¨ì¼ ì‹¤í–‰íŒŒì¼ë¡œ ë°°í¬ì™€ ìš´ì˜ì´ í¸ë¦¬ (ëŸ°íƒ€ì„ ë¶ˆí•„ìš”)</li>
<li>ë„ì»¤ë¡œ ë°°í¬ ê°€ëŠ¥</li>
<li>í´ë¼ìš°ë“œì— ë°°í¬ ê°€ëŠ¥</li>
</ul>
<h5 id="217-ë‹¤ë¥¸-í”„ë ˆì„ì›Œí¬ë“¤">2.1.7 ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ë“¤ </h5>
<ul>
<li><strong>DataSnap</strong> ë˜ëŠ” <strong>WebBroker</strong><br>
ë¸íŒŒì´ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œë‹¤. 12.2ì—ì„œëŠ” ì›¹ìŠ¤í…ì‹¤ì„ ì‚¬ìš©í•´ì„œ í…œí”Œë¦¿ì„ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</li>
<li><strong>MARS</strong><br>
<a href="https://github.com/andrea-magni/MARS">https://github.com/andrea-magni/MARS</a></li>
<li><strong>WiRL</strong><br>
<a href="https://github.com/delphi-blocks/WiRL">https://github.com/delphi-blocks/WiRL</a><br>
MARSì™€ WiRLì€ ê°™ì€ ë¿Œë¦¬ì—ì„œ ë‚˜ì˜¨ ê²ƒìœ¼ë¡œ ë³´ì´ëŠ”ë° MARSê°€ êµ¬í˜„ëœ ê²ƒì´ ì¡°ê¸ˆ ë” ë§ì§€ë§Œ, WiRLì´ ì½”ë“œëŠ” í›¨ì”¬ ì •ê°ˆí•˜ë‹¤.</li>
<li><strong>DelphiMVCFramework</strong><br>
<a href="https://github.com/danieleteti/delphimvcframework">https://github.com/danieleteti/delphimvcframework</a><br>
ê°€ì¥ ì—…ë°ì´íŠ¸ê°€ í™œë°œí•˜ë‹¤. ì†ŒìŠ¤ì½”ë“œ ì •ëˆì´ ì˜ ì•ˆëœì ì€ ì•„ì‰½ë‹¤.</li>
<li><strong>TMS WebCore</strong><br>
<a href="https://www.tmssoftware.com/site/tmswebcore.asp">https://www.tmssoftware.com/site/tmswebcore.asp</a><br>
ë¸íŒŒì´ Formì„ ì›¹ìœ¼ë¡œ ì „í™˜í•´ì£¼ëŠ” ë“±ì˜ ê¸°ëŠ¥ì´ ìˆë‹¤. ìœ ë£Œ</li>
<li><strong>Intraweb</strong><br>
<a href="https://www.atozed.com/intraweb/">https://www.atozed.com/intraweb/</a><br>
ê°€ì¥ ì˜¤ë˜ëœ ì†”ë£¨ì…˜. ìœ ë£Œ.</li>
<li><strong>UniGUI</strong><br>
<a href="https://www.unigui.com/">https://www.unigui.com/</a><br>
ìœ ë£Œ</li>
<li><strong>D2Bridge</strong><br>
<a href="https://www.d2bridge.com.br/#">https://www.d2bridge.com.br/#</a><br>
ë¸íŒŒì´ Formì„ ì›¹ìœ¼ë¡œ ì „í™˜í•´ì£¼ëŠ” ë“±ì˜ ê¸°ëŠ¥ì´ ìˆë‹¤.<br>
ì˜¤í”ˆì†ŒìŠ¤<br>
â€‹</li>
</ul>
<h4 id="22-ì†ŒìŠ¤ì½”ë“œ-ë‹¤ìš´ë¡œë“œ">2.2 ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œ </h4>
<p>ë¸ë§ˆë‹¹ ê³µì‹ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ í´ë¡ í•œë‹¤<br>
<a href="https://github.com/DELMadang/Seminar">ë¸ë§ˆë‹¹ ì„¸ë¯¸ë‚˜ ë¦¬í¬ì§€í† ë¦¬</a></p>
<p>í´ë¡  í›„ í´ë”ì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<pre data-role="codeBlock" data-info="console" class="language-console console"><code>01.RESTServer/
  â”œâ”€â”€ bin                     // ì‹¤í–‰ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” ê³³
  â”œâ”€â”€ database
  â”‚   â””â”€â”€ schema.sql          // MariaDBìš© ìŠ¤í‚¤ë§ˆ
  â”œâ”€â”€ docs
  â”‚   â””â”€â”€ Seminar_20250723.md // í˜„ì¬ ë³´ê³  ìˆëŠ” ë¬¸ì„œ
  â”œâ”€â”€ lib
  â”‚   â”œâ”€â”€ Horse               // Horse ì—”ì§„ ìœ ë‹›ë“¤
  â”‚   â””â”€â”€ MiddleWare          // ë¯¸ë“¤ì›¨ì–´ ìœ ë‹›ë“¤
  â”‚   â””â”€â”€ Swagger             // ìŠ¤ì›¨ê±° ìœ ë‹›ë“¤
  â””â”€â”€ src
      â”œâ”€â”€ 00.Raw              // Indyë¥¼ ì‚¬ìš©í•œ ì„œë²„
      â”œâ”€â”€ 01.Basic            // ê¸°ë³¸ ì„œë²„
      â”œâ”€â”€ 02.MiddleWare       // ë¯¸ë“¤ì›¨ì–´ ì ìš©í•œ ì„œë²„
      â”œâ”€â”€ 03.Database         // ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì„œë²„
      â”œâ”€â”€ 04.Client           // í´ë¼ì´ì–¸íŠ¸
      â””â”€â”€ 99.NodeJS           // NodeJS ì˜ˆì œ
</code></pre><h4 id="23-indyë¥¼-ì‚¬ìš©í•˜ì—¬-êµ¬í˜„í•˜ê¸°">2.3 Indyë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•˜ê¸° </h4>
<p>í”„ë ˆì„ì›Œí¬ì˜ ë„ì›€ì—†ì´ ì„œë²„ë¥¼ êµ¬í˜„í•´ ë³´ë©´ì„œ, í”„ë ˆì„ì›Œí¬ì˜ í•„ìš”ì„±ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-constructor">constructor</span> TfrmMain<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>AOwner<span class="token punctuation">:</span> TComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  <span class="token keyword keyword-inherited">inherited</span><span class="token punctuation">;</span>

  FServer <span class="token operator">:=</span> TIdHttpServer<span class="token punctuation">.</span>Create<span class="token punctuation">(</span><span class="token keyword keyword-Self">Self</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-destructor">destructor</span> TfrmMain<span class="token punctuation">.</span>Destroy<span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  FServer<span class="token punctuation">.</span>Active <span class="token operator">:=</span> <span class="token keyword keyword-False">False</span><span class="token punctuation">;</span>
  FServer<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>

  <span class="token keyword keyword-inherited">inherited</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>btnExecuteClick<span class="token punctuation">(</span>Sender<span class="token punctuation">:</span> TObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  <span class="token keyword keyword-var">var</span> LURL <span class="token operator">:=</span> Format<span class="token punctuation">(</span><span class="token string">'http://localhost:%d/hello'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>FServer<span class="token punctuation">.</span>Bindings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>Port<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ShellExecute<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'open'</span><span class="token punctuation">,</span> PChar<span class="token punctuation">(</span>LURL<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword keyword-nil">nil</span><span class="token punctuation">,</span> <span class="token keyword keyword-nil">nil</span><span class="token punctuation">,</span> SW_SHOW<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>btnStartClick<span class="token punctuation">(</span>Sender<span class="token punctuation">:</span> TObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  Start<span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>btnStopClick<span class="token punctuation">(</span>Sender<span class="token punctuation">:</span> TObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  Stop<span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>Start<span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> APort<span class="token punctuation">:</span> Integer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  FServer<span class="token punctuation">.</span>Bindings<span class="token punctuation">.</span>Clear<span class="token punctuation">;</span>

  <span class="token keyword keyword-with">with</span> FServer<span class="token punctuation">.</span>Bindings<span class="token punctuation">.</span>Add <span class="token keyword keyword-do">do</span>
  <span class="token keyword keyword-begin">begin</span>
    IP <span class="token operator">:=</span> <span class="token string">'0.0.0.0'</span><span class="token punctuation">;</span>
    Port <span class="token operator">:=</span> APort<span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

  FServer<span class="token punctuation">.</span>OnCommandGet <span class="token operator">:=</span> TriggerCommandGet<span class="token punctuation">;</span>
  FServer<span class="token punctuation">.</span>Active <span class="token operator">:=</span> <span class="token keyword keyword-True">True</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>Stop<span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  FServer<span class="token punctuation">.</span>Active <span class="token operator">:=</span> <span class="token keyword keyword-False">False</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-procedure">procedure</span> TfrmMain<span class="token punctuation">.</span>TriggerCommandGet<span class="token punctuation">(</span>AContext<span class="token punctuation">:</span> TIdContext<span class="token punctuation">;</span>
  ARequestInfo<span class="token punctuation">:</span> TIdHTTPRequestInfo<span class="token punctuation">;</span> AResponseInfo<span class="token punctuation">:</span> TIdHTTPResponseInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  <span class="token keyword keyword-if">if</span> SameText<span class="token punctuation">(</span>ARequestInfo<span class="token punctuation">.</span>URI<span class="token punctuation">,</span> <span class="token string">'/hello'</span><span class="token punctuation">)</span> <span class="token keyword keyword-then">then</span>
  <span class="token keyword keyword-begin">begin</span>
    AResponseInfo<span class="token punctuation">.</span>ContentType <span class="token operator">:=</span> <span class="token string">'application/json'</span><span class="token punctuation">;</span>
    AResponseInfo<span class="token punctuation">.</span>ContentText <span class="token operator">:=</span> <span class="token string">'{"response": "Hello, world"}'</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
</code></pre><h4 id="24-ê¸°ë³¸-ì„œë²„-êµ¬í˜„">2.4 ê¸°ë³¸ ì„œë²„ êµ¬í˜„ </h4>
<p>ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì„œë²„ë¥¼ êµ¬í˜„í•´ ë³´ë©´ì„œ ë¼ìš°í„°ì˜ ì‚¬ìš©ë²•ì— ëŒ€í•´ ìµíŒë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> BasicServer<span class="token punctuation">;</span>

<span class="token keyword keyword-uses">uses</span> 
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  Horse<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span> 
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span><span class="token string">'Hello World!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h3 id="3-ë¯¸ë“¤ì›¨ì–´"><strong>3. ë¯¸ë“¤ì›¨ì–´</strong> </h3>
<h4 id="31-ë¯¸ë“¤ì›¨ì–´ë€">3.1 ë¯¸ë“¤ì›¨ì–´ë€? </h4>
<ul>
<li>ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ì—ì„œì˜ ì¤‘ê°„ ì²˜ë¦¬</li>
<li>ê³µì‹ ë¯¸ë“¤ì›¨ì–´
<ul>
<li><strong>horse/json</strong> SON ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</li>
<li><strong>horse/basic-auth</strong> ê¸°ë³¸ ì¸ì¦ì§€ì›</li>
<li><strong>horse/cors</strong> Cross-Origun Resource Sharing ì§€ì›</li>
<li><strong>horse/stream</strong> ë°”ì´ë„ˆë¦¬ ìŠ¤íŠ¸ë¦¼ ì „ì†¡ ì§€ì›</li>
<li><strong>horse/jwt</strong> JWT ì¸ì¦ ì§€ì›</li>
<li><strong>horse/exception</strong> ìµì…‰ì…˜ ì²˜ë¦¬ ì§€ì›</li>
<li><strong>horse/logger</strong> ë¡œê¹… ì§€ì›</li>
<li><strong>horse/compression</strong> ì‘ë‹µ ì••ì¶• ì§€ì›</li>
</ul>
</li>
<li>ë¹„ê³µì‹ ë¯¸ë“¤ì›¨ì–´
<ul>
<li>ì‚¬ìš©ìë“¤ì´ ê°œë°œí•œ ë‹¤ì–‘í•œ ë¯¸ë“¤ì›¨ì–´ê°€ ì¡´ì¬í•˜ë©°</li>
<li>í•„ìš”ì— ë”°ë¼ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
</ul>
</li>
</ul>
<h4 id="32-ë¯¸ë“¤ì›¨ì–´-ì‚¬ìš©í•´ë³´ê¸°">3.2 ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•´ë³´ê¸° </h4>
<h5 id="321-json-ë¯¸ë“¤ì›¨ì–´">3.2.1 JSON ë¯¸ë“¤ì›¨ì–´ </h5>
<p>JSON ë¯¸ë“¤ì›¨ì–´ëŠ” ì›¹ ì„œë²„ë‚˜ API ì„œë²„ì—ì„œ JSON ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ì¤‘ê°„ ê³„ì¸µ(middleware) ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.</p>
<p><strong>JSON ë¯¸ë“¤ì›¨ì–´ì˜ ì—­í• </strong></p>
<ul>
<li>ìš”ì²­ ì²˜ë¦¬<br>
HTTP ìš”ì²­ ë³¸ë¬¸ì˜ JSONì„ ìë™ íŒŒì‹±<br>
Content-Type ê²€ì¦ (application/json)<br>
íŒŒì‹± ì—ëŸ¬ ì²˜ë¦¬</li>
<li>ì‘ë‹µ ì²˜ë¦¬<br>
ê°ì²´ë¥¼ JSONìœ¼ë¡œ ìë™ ì§ë ¬í™”<br>
ì ì ˆí•œ Content-Type í—¤ë” ì„¤ì •<br>
JSON í¬ë§·íŒ… (ë“¤ì—¬ì“°ê¸°, ì••ì¶• ë“±)</li>
</ul>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> Middlware01<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">,</span>
  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Jhonson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      LResult<span class="token punctuation">:</span> TJSONObject<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LResult <span class="token operator">:=</span> TJSONObject<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
      LResult<span class="token punctuation">.</span>AddPair<span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">,</span> <span class="token string">'Hello, World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Res<span class="token punctuation">.</span>Send<span class="token operator">&lt;</span>TJSONObject<span class="token operator">&gt;</span><span class="token punctuation">(</span>LResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="322-basic-auth">3.2.2 basic-auth </h5>
<p>Basic Authenticationì€ HTTP í”„ë¡œí† ì½œì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì¸ì¦ ë°©ì‹ì…ë‹ˆë‹¤.<br>
Basic Authentication ë™ì‘ ì›ë¦¬</p>
<ol>
<li>ì¸ì½”ë”© ë°©ì‹</li>
</ol>
<ul>
<li>ì‚¬ìš©ìëª…ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì½œë¡ (:)ìœ¼ë¡œ ì—°ê²°</li>
<li>Base64ë¡œ ì¸ì½”ë”©</li>
<li>HTTP í—¤ë”ì— í¬í•¨í•˜ì—¬ ì „ì†¡</li>
</ul>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>username:password â†’ Base64 ì¸ì½”ë”© â†’ dXNlcm5hbWU6cGFzc3dvcmQ=
</code></pre><ol start="2">
<li>HTTP í—¤ë” í˜•ì‹</li>
</ol>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
</code></pre><ol start="3">
<li>ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</li>
</ol>
<p><strong>ì¥ì :</strong></p>
<ul>
<li>êµ¬í˜„ì´ ê°„ë‹¨í•¨</li>
<li>ëª¨ë“  HTTP í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§€ì›</li>
<li>ì„œë²„ ì„¸ì…˜ ìƒíƒœ ë¶ˆí•„ìš”</li>
</ul>
<p><strong>ë‹¨ì :</strong></p>
<ul>
<li>Base64ëŠ” ì•”í˜¸í™”ê°€ ì•„ë‹Œ ì¸ì½”ë”© (ì‰½ê²Œ ë””ì½”ë”© ê°€ëŠ¥)</li>
<li>ë§¤ ìš”ì²­ë§ˆë‹¤ ì¸ì¦ ì •ë³´ ì „ì†¡</li>
<li>ë¸Œë¼ìš°ì €ì— íŒ¨ìŠ¤ì›Œë“œ ì €ì¥ ìœ„í—˜</li>
</ul>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> Middlware02<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">,</span>

  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>BasicAuthentication<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Jhonson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// BasicAuthë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>HorseBasicAuthentication<span class="token punctuation">(</span>
    <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> AUsername<span class="token punctuation">,</span> APassword<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Boolean
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-Result">Result</span> <span class="token operator">:=</span> AUsername<span class="token punctuation">.</span>Equals<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span> <span class="token operator">and</span> APassword<span class="token punctuation">.</span>Equals<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      LResult<span class="token punctuation">:</span> TJSONObject<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LResult <span class="token operator">:=</span> TJSONObject<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
      LResult<span class="token punctuation">.</span>AddPair<span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">,</span> <span class="token string">'Hello, World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Res<span class="token punctuation">.</span>Send<span class="token operator">&lt;</span>TJSONObject<span class="token operator">&gt;</span><span class="token punctuation">(</span>LResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><p>ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸ í•˜ê¸°</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>http://user:password@localhost:9000/hello
</code></pre><h5 id="323-cors">3.2.3 cors </h5>
<p>CORS(Cross-Origin Resource Sharing)ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì˜ Same-Origin Policy(ë™ì¼ ì¶œì²˜ ì •ì±…) ì œí•œì„ ìš°íšŒí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p><strong>Same-Origin Policyë€?</strong><br>
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒ ì´ìœ ë¡œ ë‹¤ìŒ ì¡°ê±´ì´ ëª¨ë‘ ê°™ì€ ê²½ìš°ì—ë§Œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤:</p>
<ul>
<li>í”„ë¡œí† ì½œ (http/https)</li>
<li>ë„ë©”ì¸ (<a href="http://example.com">example.com</a>)</li>
<li>í¬íŠ¸ (80, 443, 8080 ë“±)</li>
</ul>
<p><strong>CORS ë™ì‘ ê³¼ì •</strong></p>
<ul>
<li>Preflight Request: ë¸Œë¼ìš°ì €ê°€ OPTIONS ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— í—ˆê°€ ìš”ì²­</li>
<li>ì„œë²„ ì‘ë‹µ: í—ˆìš©ëœ origin, ë©”ì„œë“œ, í—¤ë” ì •ë³´ ë°˜í™˜</li>
<li>ì‹¤ì œ ìš”ì²­: í—ˆê°€ë°›ì€ ê²½ìš°ì—ë§Œ ì‹¤ì œ API í˜¸ì¶œ ì‹¤í–‰</li>
</ul>
<p><strong>ì£¼ì˜ì‚¬í•­</strong></p>
<ul>
<li>ë³´ì•ˆ: * (ëª¨ë“  ë„ë©”ì¸ í—ˆìš©)ì€ ìš´ì˜ í™˜ê²½ì—ì„œ ìœ„í—˜</li>
<li>ì„±ëŠ¥: Preflight ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©</li>
<li>ì„¤ì •: í•„ìš”í•œ originë§Œ ì •í™•íˆ í—ˆìš©í•´ì•¼ í•¨</li>
</ul>
<p>CORSëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì ìš©ë˜ëŠ” ì •ì±…ì´ë¯€ë¡œ, ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì„œë²„ ê°„ í†µì‹ ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> Middlware03<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">,</span>

  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>BasicAuthentication<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>CORS<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  HorseCORS
    <span class="token punctuation">.</span>AllowedOrigin<span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>AllowedCredentials<span class="token punctuation">(</span><span class="token keyword keyword-true">true</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>AllowedHeaders<span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>AllowedMethods<span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>ExposedHeaders<span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// It's necessary to add the middleware in the Horse:</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>CORS<span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Jhonson<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// BasicAuthë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>HorseBasicAuthentication<span class="token punctuation">(</span>
    <span class="token keyword keyword-function">function</span><span class="token punctuation">(</span><span class="token keyword keyword-const">const</span> AUsername<span class="token punctuation">,</span> APassword<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span><span class="token punctuation">)</span><span class="token punctuation">:</span> Boolean
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-Result">Result</span> <span class="token operator">:=</span> AUsername<span class="token punctuation">.</span>Equals<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span> <span class="token operator">and</span> APassword<span class="token punctuation">.</span>Equals<span class="token punctuation">(</span><span class="token string">'password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      LResult<span class="token punctuation">:</span> TJSONObject<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LResult <span class="token operator">:=</span> TJSONObject<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
      LResult<span class="token punctuation">.</span>AddPair<span class="token punctuation">(</span><span class="token string">'response'</span><span class="token punctuation">,</span> <span class="token string">'Hello, World'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Res<span class="token punctuation">.</span>Send<span class="token operator">&lt;</span>TJSONObject<span class="token operator">&gt;</span><span class="token punctuation">(</span>LResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="324-stream">3.2.4 stream </h5>
<p>Streamì„ ë‹¤ë£¨ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì›¹ APIì—ì„œ íŒŒì¼ì´ë‚˜ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì£¼ìš” íŠ¹ì§•</p>
<ul>
<li>íŒŒì¼ ì „ì†¡: PDF, ì´ë¯¸ì§€, ë™ì˜ìƒ ë“± ë‹¤ì–‘í•œ íŒŒì¼ í˜•ì‹ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡</li>
<li>ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±: ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ ë©”ëª¨ë¦¬ì— ëª¨ë‘ ë¡œë“œí•˜ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬</li>
<li>Content-Type ì„¤ì •: íŒŒì¼ í˜•ì‹ì— ë§ëŠ” MIME íƒ€ì… ìë™ ì„¤ì •</li>
<li>MIT ë¼ì´ì„ ìŠ¤: ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤</li>
</ul>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> Middlware04<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>Classes<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>IOUtils<span class="token punctuation">,</span>

  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>OctetStream<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>OctetStream<span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/stream'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      LStream<span class="token punctuation">:</span> TFileStream<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LStream <span class="token operator">:=</span> TFileStream<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>ExtractFilePath<span class="token punctuation">(</span>ParamStr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'horse.pdf'</span><span class="token punctuation">,</span> fmOpenRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
      Res<span class="token punctuation">.</span>Send<span class="token operator">&lt;</span>TStream<span class="token operator">&gt;</span><span class="token punctuation">(</span>LStream<span class="token punctuation">)</span><span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/pdf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/download/:filename'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      LPath<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span><span class="token punctuation">;</span>
      LStream<span class="token punctuation">:</span> TFileStream<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LPath <span class="token operator">:=</span> TPath<span class="token punctuation">.</span>Combine<span class="token punctuation">(</span>ExtractFilePath<span class="token punctuation">(</span>ParamStr<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Req<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">'filename'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-if">if</span> TFile<span class="token punctuation">.</span>Exists<span class="token punctuation">(</span>LPath<span class="token punctuation">)</span> <span class="token keyword keyword-then">then</span>
      <span class="token keyword keyword-begin">begin</span>
        LStream <span class="token operator">:=</span> TFileStream<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>LPath<span class="token punctuation">,</span> fmOpenRead<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token operator">&lt;</span>TStream<span class="token operator">&gt;</span><span class="token punctuation">(</span>LStream<span class="token punctuation">)</span><span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/pdf'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span>
      <span class="token keyword keyword-else">else</span>
      <span class="token keyword keyword-begin">begin</span>
        Res<span class="token punctuation">.</span>Status<span class="token punctuation">(</span>THTTPStatus<span class="token punctuation">.</span>NotFound<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="325-jwt">3.2.5 jwt </h5>
<p>JWTë€?<br>
JWTëŠ” ë‹¹ì‚¬ì ê°„ì— ì •ë³´ë¥¼ JSON ê°ì²´ë¡œ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°œë°©í˜• í‘œì¤€(RFC 7519)ì…ë‹ˆë‹¤. ì£¼ë¡œ **ì¸ì¦(Authentication)**ê³¼ ì •ë³´ êµí™˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>JWT êµ¬ì¡°<br>
JWTëŠ” ì (.)ìœ¼ë¡œ êµ¬ë¶„ëœ ì„¸ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:</p>
<pre data-role="codeBlock" data-info="text" class="language-text text"><code>Header.Payload.Signature
</code></pre><p>1.Header (í—¤ë”)</p>
<ul>
<li>í† í° íƒ€ì…(JWT)ê³¼ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ ì •ë³´</li>
<li>Base64Urlë¡œ ì¸ì½”ë”©</li>
</ul>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code><span class="token punctuation">{</span>
  <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span><span class="token punctuation">,</span>
  <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span>
<span class="token punctuation">}</span>
</code></pre><p>2.Payload (í˜ì´ë¡œë“œ)</p>
<ul>
<li>ì‹¤ì œ ì „ì†¡í•  ë°ì´í„°(í´ë ˆì„)</li>
<li>ì‚¬ìš©ì ì •ë³´, ê¶Œí•œ, ë§Œë£Œì‹œê°„ ë“±</li>
</ul>
<pre data-role="codeBlock" data-info="json" class="language-json json"><code><span class="token punctuation">{</span>
  <span class="token property">"sub"</span><span class="token operator">:</span> <span class="token string">"1234567890"</span><span class="token punctuation">,</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"John Doe"</span><span class="token punctuation">,</span>
  <span class="token property">"iat"</span><span class="token operator">:</span> <span class="token number">1516239022</span><span class="token punctuation">,</span>
  <span class="token property">"exp"</span><span class="token operator">:</span> <span class="token number">1516242622</span>
<span class="token punctuation">}</span>
</code></pre><p>3.Signature (ì„œëª…)</p>
<ul>
<li>í† í°ì˜ ë¬´ê²°ì„± ê²€ì¦</li>
<li>Header + Payload + Secret Keyë¡œ ìƒì„±</li>
</ul>
<p><strong>ë™ì‘ ë°©ì‹</strong></p>
<ul>
<li>ë¡œê·¸ì¸: ì‚¬ìš©ìê°€ ì¸ì¦ ì •ë³´ ì œê³µ</li>
<li>í† í° ë°œê¸‰: ì„œë²„ê°€ JWT ìƒì„± í›„ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡</li>
<li>í† í° ì‚¬ìš©: í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ JWTë¥¼ Headerì— í¬í•¨</li>
<li>ê²€ì¦: ì„œë²„ê°€ JWT ì„œëª…ì„ ê²€ì¦í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦</li>
</ul>
<p><strong>ì¥ì </strong></p>
<ul>
<li>ìƒíƒœ ì—†ìŒ(Stateless): ì„œë²„ì— ì„¸ì…˜ ì •ë³´ ì €ì¥ ë¶ˆí•„ìš”</li>
<li>í™•ì¥ì„±: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì— ì í•©</li>
<li>í¬ë¡œìŠ¤ ë„ë©”ì¸: CORS ë¬¸ì œ í•´ê²°</li>
<li>ëª¨ë°”ì¼ ì¹œí™”ì : ì¿ í‚¤ ëŒ€ì‹  ì‚¬ìš© ê°€ëŠ¥</li>
</ul>
<p><strong>ë‹¨ì </strong></p>
<ul>
<li>í† í° í¬ê¸°: ì¿ í‚¤ë³´ë‹¤ í¬ê¸°ê°€ í¼</li>
<li>ë³´ì•ˆ: í† í° íƒˆì·¨ ì‹œ ë§Œë£Œ ì „ê¹Œì§€ ì‚¬ìš© ê°€ëŠ¥</li>
<li>ì„œë²„ ì¸¡ ë¬´íš¨í™” ì–´ë ¤ì›€: ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ í•„ìš”</li>
</ul>
<p><strong>ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€</strong></p>
<ul>
<li>ì¸ì¦/ì¸ê°€: ë¡œê·¸ì¸ í›„ API ì ‘ê·¼ ì œì–´</li>
<li>ì •ë³´ êµí™˜: ì„œë¹„ìŠ¤ ê°„ ì•ˆì „í•œ ë°ì´í„° ì „ì†¡</li>
<li>SSO(Single Sign-On): ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê°„ ì¸ì¦ ê³µìœ </li>
</ul>
<p>JWTëŠ” í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í‘œì¤€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¸ì¦ ë°©ì‹ìœ¼ë¡œ, REST APIë‚˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ íŠ¹íˆ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-uses">uses</span> 
  Horse<span class="token punctuation">,</span> 
  Horse<span class="token punctuation">.</span>JWT<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>HorseJWT<span class="token punctuation">(</span><span class="token string">'MY-PASSWORD'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

  THorse<span class="token punctuation">.</span>Post<span class="token punctuation">(</span><span class="token string">'ping'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span><span class="token string">'pong'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="326-exception">3.2.6 exception </h5>
<p>Handle-exceptionì€ Horse í”„ë ˆì„ì›Œí¬ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” APIì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ìë™ìœ¼ë¡œ ìºì¹˜í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì ì ˆí•œ JSON í˜•íƒœì˜ ì˜¤ë¥˜ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-uses">uses</span> 
  Horse<span class="token punctuation">,</span> 
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">,</span> <span class="token comment">// It's necessary to use the unit</span>
  Horse<span class="token punctuation">.</span>HandleException<span class="token punctuation">,</span> <span class="token comment">// It's necessary to use the unit</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// It's necessary to add the middlewares in the Horse:</span>
  THorse
    <span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Jhonson<span class="token punctuation">)</span> <span class="token comment">// It has to be before the exceptions middleware</span>
    <span class="token punctuation">.</span>Use<span class="token punctuation">(</span>HandleException<span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Post<span class="token punctuation">(</span><span class="token string">'/ping'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token comment">// Manage your exceptions:</span>
      <span class="token keyword keyword-raise">raise</span> EHorseException<span class="token punctuation">.</span><span class="token keyword keyword-New">New</span><span class="token punctuation">.</span>Error<span class="token punctuation">(</span><span class="token string">'My Error!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="327-logger">3.2.7 logger </h5>
<p>ê°œë°œëœ APIì˜ ë¡œê·¸ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” HTTP ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì ‘ê·¼ ë¡œê·¸ë¥¼ ìë™ìœ¼ë¡œ ê¸°ë¡í•˜ì—¬ APIì˜ ëª¨ë‹ˆí„°ë§ê³¼ ë””ë²„ê¹…ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-uses">uses</span> 
  Horse<span class="token punctuation">,</span> 
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">,</span> <span class="token comment">// It's necessary to use the unit</span>
  Horse<span class="token punctuation">.</span>HandleException<span class="token punctuation">,</span> <span class="token comment">// It's necessary to use the unit</span>

<span class="token keyword keyword-begin">begin</span>
  THorse<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      Writeln<span class="token punctuation">(</span>Format<span class="token punctuation">(</span><span class="token string">'[%s] %s %s'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        FormatDateTime<span class="token punctuation">(</span><span class="token string">'yyyy-mm-dd hh:nn:ss'</span><span class="token punctuation">,</span> Now<span class="token punctuation">)</span><span class="token punctuation">,</span>
        Req<span class="token punctuation">.</span>Method<span class="token punctuation">,</span>
        Req<span class="token punctuation">.</span>PathInfo
      <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Next<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h5 id="328-compression">3.2.8 compression </h5>
<p>APIì˜ ì½˜í…ì¸ ë¥¼ ì••ì¶•í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” HTTP ì‘ë‹µì„ ìë™ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì¤„ì´ê³  ì „ì†¡ ì†ë„ë¥¼ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
<p>ì§€ì›í•˜ëŠ” ì••ì¶• ë°©ì‹<br>
í˜„ì¬ ë¯¸ë“¤ì›¨ì–´ëŠ” DEFLATEì™€ GZIPì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì••ì¶•í•  ìˆ˜ ìˆë„ë¡ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ì••ì¶• íƒ€ì…</th>
<th>Delphi</th>
<th>Lazarus</th>
</tr>
</thead>
<tbody>
<tr>
<td>DEFLATE</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>GZIP</td>
<td>âœ…</td>
<td>âŒ</td>
</tr>
</tbody>
</table>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">,</span>

  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>Jhonson<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>Compression<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  THorse
    <span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Compression<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>Use<span class="token punctuation">(</span>Jhonson<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ì¼ì • í¬ê¸° ì´ìƒë§Œ ì••ì¶•í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤</span>
  <span class="token comment">// THorse.Use(Compression(1024));</span>

  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/ping'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-var">var</span>
      I<span class="token punctuation">:</span> Integer<span class="token punctuation">;</span>
      LPong<span class="token punctuation">:</span> TJSONArray<span class="token punctuation">;</span>
    <span class="token keyword keyword-begin">begin</span>
      LPong <span class="token operator">:=</span> TJSONArray<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
      <span class="token keyword keyword-for">for</span> I <span class="token operator">:=</span> <span class="token number">0</span> <span class="token keyword keyword-to">to</span> <span class="token number">1000</span> <span class="token keyword keyword-do">do</span>
        LPong<span class="token punctuation">.</span>Add<span class="token punctuation">(</span>TJSONObject<span class="token punctuation">.</span>Create<span class="token punctuation">(</span>TJSONPair<span class="token punctuation">.</span>Create<span class="token punctuation">(</span><span class="token string">'ping'</span><span class="token punctuation">,</span> <span class="token string">'pong'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span>LPong<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h3 id="4-ë°ì´í„°ë² ì´ìŠ¤-ì—°ë™-ì„œë²„"><strong>4. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì„œë²„</strong> </h3>
<h4 id="41-ë°ì´í„°ë² ì´ìŠ¤-ë°-ìƒ˜í”Œ-ë°ì´í„°-ìƒì„±">4.1 ë°ì´í„°ë² ì´ìŠ¤ ë° ìƒ˜í”Œ ë°ì´í„° ìƒì„± </h4>
<pre data-role="codeBlock" data-info="sql" class="language-sql sql"><code><span class="token keyword keyword-DROP">DROP</span> <span class="token keyword keyword-TABLE">TABLE</span> <span class="token keyword keyword-IF">IF</span> <span class="token keyword keyword-EXISTS">EXISTS</span> users<span class="token punctuation">;</span>
<span class="token keyword keyword-CREATE">CREATE</span> <span class="token keyword keyword-TABLE">TABLE</span> users <span class="token punctuation">(</span>
  seq <span class="token keyword keyword-INTEGER">INTEGER</span> <span class="token keyword keyword-AUTO_INCREMENT">AUTO_INCREMENT</span> <span class="token keyword keyword-PRIMARY">PRIMARY</span> <span class="token keyword keyword-KEY">KEY</span><span class="token punctuation">,</span>
  usr_id <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  usr_nm <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  usr_pw <span class="token keyword keyword-VARCHAR">VARCHAR</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
  usr_lvl <span class="token keyword keyword-INTEGER">INTEGER</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><h4 id="42-firedac-ì—°ê²°-í’€-ë§Œë“¤ê¸°">4.2 FireDAC ì—°ê²° í’€ ë§Œë“¤ê¸° </h4>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 
<ul>
<li>ì„±ëŠ¥ ì €í•˜</li>
<li>ë¦¬ì†ŒìŠ¤ ë‚­ë¹„</li>
<li>ì—°ê²° í•œê³„ ì´ˆê³¼ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ì €í•˜ ë˜ëŠ” ë‹¤ìš´<br>
MySQL ê¸°ë³¸ max_connections = 151<br>
PostgreSQL ê¸°ë³¸ max_connections = 100</li>
</ul>
</li>
<li>FireDACì€ í’€ë§ì„ ê¸°ë³¸ìœ¼ë¡œ ì§€ì›í•œë‹¤</li>
</ul>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-unit">unit</span> uDBPool<span class="token punctuation">;</span>

<span class="token keyword keyword-interface">interface</span>

<span class="token directive marco property">{$REGION 'USES'}</span>
<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>Classes<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>Generics<span class="token punctuation">.</span>Collections<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>NetEncoding<span class="token punctuation">,</span>

  Data<span class="token punctuation">.</span>DB<span class="token punctuation">,</span>

  FireDAC<span class="token punctuation">.</span>Comp<span class="token punctuation">.</span>UI<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>UI<span class="token punctuation">.</span>Intf<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>VCLUI<span class="token punctuation">.</span>Wait<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Stan<span class="token punctuation">.</span>Def<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Stan<span class="token punctuation">.</span>Intf<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Stan<span class="token punctuation">.</span>Pool<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Stan<span class="token punctuation">.</span>Async<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Stan<span class="token punctuation">.</span>Param<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>DApt<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Phys<span class="token punctuation">.</span>MySQL<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Comp<span class="token punctuation">.</span>Client<span class="token punctuation">,</span>
  FireDAC<span class="token punctuation">.</span>Comp<span class="token punctuation">.</span>Script<span class="token punctuation">;</span>
<span class="token directive marco property">{$ENDREGION}</span>

<span class="token keyword keyword-type">type</span>
  TDatabase <span class="token operator">=</span> <span class="token keyword keyword-class">class</span> sealed
  <span class="token keyword keyword-strict">strict</span> <span class="token keyword keyword-private">private</span>
    <span class="token keyword keyword-const">const</span>
      CONNECTION_NAME <span class="token operator">=</span> <span class="token string">'_pooled_connection_'</span><span class="token punctuation">;</span>

    <span class="token keyword keyword-class">class</span> <span class="token keyword keyword-constructor">constructor</span> Create<span class="token punctuation">;</span>
    <span class="token keyword keyword-class">class</span> <span class="token keyword keyword-destructor">destructor</span> Destroy<span class="token punctuation">;</span>
  <span class="token keyword keyword-public">public</span>
    <span class="token keyword keyword-class">class</span> <span class="token keyword keyword-function">function</span>  GetConnection<span class="token punctuation">:</span> TFDConnection<span class="token punctuation">;</span> <span class="token keyword keyword-static">static</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-implementation">implementation</span>

<span class="token directive marco property">{$REGION 'TDatabase'}</span>

<span class="token keyword keyword-class">class</span> <span class="token keyword keyword-constructor">constructor</span> TDatabase<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  <span class="token keyword keyword-var">var</span> LParams <span class="token operator">:=</span> TStringList<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>
  <span class="token keyword keyword-try">try</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'Server=127.0.0.1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'Port=3306'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'Database=pos_db'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'User_Name=root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'Password=1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'Pooled=True'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    LParams<span class="token punctuation">.</span>Add<span class="token punctuation">(</span><span class="token string">'CharacterSet=Utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    FDManager<span class="token punctuation">.</span>AddConnectionDef<span class="token punctuation">(</span>CONNECTION_NAME<span class="token punctuation">,</span> <span class="token string">'MySQL'</span><span class="token punctuation">,</span> LParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-finally">finally</span>
    LParams<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token keyword keyword-destructor">destructor</span> TDatabase<span class="token punctuation">.</span>Destroy<span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  FDManager<span class="token punctuation">.</span>CloseConnectionDef<span class="token punctuation">(</span>CONNECTION_NAME<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-class">class</span> <span class="token keyword keyword-function">function</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">:</span> TFDConnection<span class="token punctuation">;</span>
<span class="token keyword keyword-begin">begin</span>
  <span class="token keyword keyword-Result">Result</span> <span class="token operator">:=</span> TFDConnection<span class="token punctuation">.</span>Create<span class="token punctuation">(</span><span class="token keyword keyword-nil">nil</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-Result">Result</span><span class="token punctuation">.</span>ConnectionDefName <span class="token operator">:=</span> CONNECTION_NAME<span class="token punctuation">;</span>
  <span class="token keyword keyword-Result">Result</span><span class="token punctuation">.</span>Connected <span class="token operator">:=</span> <span class="token keyword keyword-True">True</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token directive marco property">{$ENDREGION}</span>

<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h4 id="43-api-ì„¤ê³„">4.3 API ì„¤ê³„ </h4>
<table>
<thead>
<tr>
<th>HTTP ë©”ì†Œë“œ</th>
<th>URL</th>
<th>ë™ì‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/user</td>
<td>ì „ì²´ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ</td>
</tr>
<tr>
<td>GET</td>
<td>/api/user/:id</td>
<td>íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ</td>
</tr>
<tr>
<td>POST</td>
<td>/api/user</td>
<td>ì‚¬ìš©ì ìƒì„±</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/user/:id</td>
<td>ì‚¬ìš©ì ìˆ˜ì •</td>
</tr>
<tr>
<td>DELETE</td>
<td>/api/user/:id</td>
<td>íŠ¹ì • ì‚¬ìš©ì ì‚­ì œ</td>
</tr>
</tbody>
</table>
<h4 id="44-êµ¬í˜„">4.4 êµ¬í˜„ </h4>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> DBServer<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>Classes<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>JSON<span class="token punctuation">,</span>

  Data<span class="token punctuation">.</span>DB<span class="token punctuation">,</span>
  uDBPool<span class="token punctuation">,</span>

  Horse<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  <span class="token comment">// ì „ì²´ ì¡°íšŒ</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-var">var</span> LConnection <span class="token operator">:=</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">;</span>
      <span class="token keyword keyword-var">var</span> LQuery <span class="token operator">:=</span> LConnection<span class="token punctuation">.</span>GetQuery<span class="token punctuation">;</span>
      <span class="token keyword keyword-try">try</span>
        LQuery<span class="token punctuation">.</span>SQL<span class="token punctuation">.</span>Text <span class="token operator">:=</span> '<span class="token string">''</span>
        SELECT
          USR_ID
          <span class="token punctuation">,</span> USR_NM
          <span class="token punctuation">,</span> USR_LVL
        FROM
          USRS
        '<span class="token string">''</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Open<span class="token punctuation">;</span>

        Res<span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span>LQuery<span class="token punctuation">.</span>ToJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-finally">finally</span>
        LQuery<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        LConnection<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ë‹¨ê±´ ì¡°íšŒ</span>
  THorse<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-var">var</span> LConnection <span class="token operator">:=</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">;</span>
      <span class="token keyword keyword-var">var</span> LQuery <span class="token operator">:=</span> LConnection<span class="token punctuation">.</span>GetQuery<span class="token punctuation">;</span>
      <span class="token keyword keyword-try">try</span>
        LQuery<span class="token punctuation">.</span>SQL<span class="token punctuation">.</span>Text <span class="token operator">:=</span> '<span class="token string">''</span>
        SELECT
          USR_ID
          <span class="token punctuation">,</span> USR_NM
          <span class="token punctuation">,</span> USR_LVL
        FROM
          USRS
        WHERE
          USR_ID <span class="token operator">=</span> <span class="token punctuation">:</span>USR_ID
        '<span class="token string">''</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_ID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> Req<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Open<span class="token punctuation">;</span>

        Res<span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span>LQuery<span class="token punctuation">.</span>ToJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-finally">finally</span>
        LQuery<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        LConnection<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ì‚­ì œ</span>
  THorse<span class="token punctuation">.</span>Delete<span class="token punctuation">(</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-var">var</span> LConnection <span class="token operator">:=</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">;</span>
      <span class="token keyword keyword-var">var</span> LQuery <span class="token operator">:=</span> LConnection<span class="token punctuation">.</span>GetQuery<span class="token punctuation">;</span>
      <span class="token keyword keyword-try">try</span>
        LQuery<span class="token punctuation">.</span>SQL<span class="token punctuation">.</span>Text <span class="token operator">:=</span> '<span class="token string">''</span>
        DELETE
        FROM
          USRS
        WHERE
          USR_ID <span class="token operator">=</span> <span class="token punctuation">:</span>USR_ID
        '<span class="token string">''</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_ID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> Req<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>ExecSQL<span class="token punctuation">;</span>

        Res<span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span><span class="token string">'{"result": "OK"}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-finally">finally</span>
        LQuery<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        LConnection<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ë“±ë¡</span>
  THorse<span class="token punctuation">.</span>Post<span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-var">var</span> LConnection <span class="token operator">:=</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">;</span>
      <span class="token keyword keyword-var">var</span> LQuery <span class="token operator">:=</span> LConnection<span class="token punctuation">.</span>GetQuery<span class="token punctuation">;</span>
      <span class="token keyword keyword-try">try</span>
        LQuery<span class="token punctuation">.</span>SQL<span class="token punctuation">.</span>Text <span class="token operator">:=</span> '<span class="token string">''</span>
        INSERT INTO USRS
        <span class="token punctuation">(</span>
          USR_ID
          <span class="token punctuation">,</span> USR_PW
          <span class="token punctuation">,</span> USR_NM
          <span class="token punctuation">,</span> USR_LVL
        <span class="token punctuation">)</span>
        VALUES
        <span class="token punctuation">(</span>
          <span class="token punctuation">:</span>USR_ID
          <span class="token punctuation">,</span> <span class="token punctuation">:</span>USR_PW
          <span class="token punctuation">,</span> <span class="token punctuation">:</span>USR_NM
          <span class="token punctuation">,</span> <span class="token punctuation">:</span>USR_LVL
        <span class="token punctuation">)</span>
        '<span class="token string">''</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-var">var</span> LJSON <span class="token operator">:=</span> TJSONObject<span class="token punctuation">.</span>ParseJSONValue<span class="token punctuation">(</span>Req<span class="token punctuation">.</span>Body<span class="token punctuation">)</span> <span class="token operator">as</span> TJSONObject<span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_ID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> LJSON<span class="token punctuation">.</span>GetValue<span class="token operator">&lt;</span><span class="token keyword keyword-string">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'usr_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_PW'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> <span class="token string">'1234'</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_NM'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> LJSON<span class="token punctuation">.</span>GetValue<span class="token operator">&lt;</span><span class="token keyword keyword-string">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'usr_nm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_LVL'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsInteger <span class="token operator">:=</span> LJSON<span class="token punctuation">.</span>GetValue<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'usr_lvl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>ExecSQL<span class="token punctuation">;</span>
        LJSON<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span>LQuery<span class="token punctuation">.</span>ToJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-finally">finally</span>
        LQuery<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        LConnection<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// ìˆ˜ì •</span>
  THorse<span class="token punctuation">.</span>Put<span class="token punctuation">(</span><span class="token string">'/user/:id'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
      <span class="token keyword keyword-var">var</span> LConnection <span class="token operator">:=</span> TDatabase<span class="token punctuation">.</span>GetConnection<span class="token punctuation">;</span>
      <span class="token keyword keyword-var">var</span> LQuery <span class="token operator">:=</span> LConnection<span class="token punctuation">.</span>GetQuery<span class="token punctuation">;</span>
      <span class="token keyword keyword-try">try</span>
        LQuery<span class="token punctuation">.</span>SQL<span class="token punctuation">.</span>Text <span class="token operator">:=</span> '<span class="token string">''</span>
        UPDATE USRS
        <span class="token keyword keyword-SET">SET</span>
          USR_NM <span class="token operator">=</span> <span class="token punctuation">:</span>USR_NM
          <span class="token punctuation">,</span> USR_LVL <span class="token operator">=</span> <span class="token punctuation">:</span>USR_LVL
        WHERE
          USR_ID <span class="token operator">=</span> <span class="token punctuation">:</span>USR_ID
        '<span class="token string">''</span><span class="token punctuation">;</span>

        <span class="token keyword keyword-var">var</span> LJSON <span class="token operator">:=</span> TJSONObject<span class="token punctuation">.</span>ParseJSONValue<span class="token punctuation">(</span>Req<span class="token punctuation">.</span>Body<span class="token punctuation">)</span> <span class="token operator">as</span> TJSONObject<span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_ID'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> Req<span class="token punctuation">.</span>Params<span class="token punctuation">[</span><span class="token string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_NM'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsString <span class="token operator">:=</span> LJSON<span class="token punctuation">.</span>GetValue<span class="token operator">&lt;</span><span class="token keyword keyword-string">string</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'usr_nm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>Params<span class="token punctuation">.</span>ParamByName<span class="token punctuation">(</span><span class="token string">'USR_LVL'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>AsInteger <span class="token operator">:=</span> LJSON<span class="token punctuation">.</span>GetValue<span class="token operator">&lt;</span>Integer<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">'usr_lvl'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LQuery<span class="token punctuation">.</span>ExecSQL<span class="token punctuation">;</span>
        LJSON<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>

        Res<span class="token punctuation">.</span>ContentType<span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Res<span class="token punctuation">.</span>Send<span class="token punctuation">(</span>LQuery<span class="token punctuation">.</span>ToJSON<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword keyword-finally">finally</span>
        LQuery<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
        LConnection<span class="token punctuation">.</span>Free<span class="token punctuation">;</span>
      <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre><h3 id="5-api-ë¬¸ì„œí™”ì™€-í…ŒìŠ¤íŠ¸"><strong>5. API ë¬¸ì„œí™”ì™€ í…ŒìŠ¤íŠ¸</strong> </h3>
<h4 id="51-swaggerë¥¼-ì‚¬ìš©í•´ì„œ-ë¬¸ì„œí™”-í•˜ê¸°">5.1 Swaggerë¥¼ ì‚¬ìš©í•´ì„œ ë¬¸ì„œí™” í•˜ê¸° </h4>
<p>SWAGGERì˜ íŠ¹ì§•</p>
<ul>
<li>API ë¬¸ì„œí™” ìë™í™”<br>
ì½”ë“œì—ì„œ ì£¼ì„ì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ API ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  ì—…ë°ì´íŠ¸í•  í•„ìš”ê°€ ì—†ì–´ ê°œë°œ íš¨ìœ¨ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.</li>
<li>OpenAPI ì‚¬ì–‘ ì¤€ìˆ˜<br>
OpenAPI Specification(OAS)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ í‘œì¤€í™”ëœ ë°©ì‹ìœ¼ë¡œ REST APIë¥¼ ì •ì˜í•˜ê³  ë¬¸ì„œí™”í•©ë‹ˆë‹¤.</li>
<li>ì¸í„°ë™í‹°ë¸Œ ë¬¸ì„œ<br>
Swagger UIë¥¼ í†µí•´ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ëŒ€í™”í˜• ë¬¸ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‹¤ì œ API í˜¸ì¶œì„ í•´ë³´ë©´ì„œ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì½”ë“œ ìƒì„±<br>
API ì‚¬ì–‘ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ SDK, ì„œë²„ ìŠ¤í… ì½”ë“œ ë“±ì„ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ìë™ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>API ì„¤ê³„ ìš°ì„  ê°œë°œ<br>
ì½”ë“œ ì‘ì„± ì „ì— APIë¥¼ ë¨¼ì € ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ì—¬ íŒ€ ê°„ í˜‘ì—…ê³¼ API ì¼ê´€ì„±ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ë‹¤ì–‘í•œ ë„êµ¬ ì§€ì›<br>
Swagger Editor, Swagger UI, Swagger Codegen ë“± ë‹¤ì–‘í•œ ë„êµ¬ë“¤ì´ API ê°œë°œ ìƒëª…ì£¼ê¸° ì „ë°˜ì„ ì§€ì›í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì´ëŸ¬í•œ íŠ¹ì§•ë“¤ë¡œ ì¸í•´ SwaggerëŠ” í˜„ì¬ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” API ë¬¸ì„œí™” ë° ê°œë°œ ë„êµ¬ ì¤‘ í•˜ë‚˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<pre data-role="codeBlock" data-info="pascal" class="language-pascal pascal"><code><span class="token keyword keyword-program">program</span> Middlware05<span class="token punctuation">;</span>

<span class="token directive marco property">{$APPTYPE CONSOLE}</span>

<span class="token keyword keyword-uses">uses</span>
  System<span class="token punctuation">.</span>SysUtils<span class="token punctuation">,</span>
  System<span class="token punctuation">.</span>Classes<span class="token punctuation">,</span>

  Horse<span class="token punctuation">,</span>
  Horse<span class="token punctuation">.</span>GBSwagger<span class="token punctuation">;</span>

<span class="token keyword keyword-type">type</span>
  TUser <span class="token operator">=</span> <span class="token keyword keyword-class">class</span>
  <span class="token keyword keyword-private">private</span>
    FID<span class="token punctuation">:</span> Double<span class="token punctuation">;</span>
    FName<span class="token punctuation">:</span> <span class="token keyword keyword-String">String</span><span class="token punctuation">;</span>
    FLastName<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-public">public</span>
    <span class="token keyword keyword-property">property</span> ID<span class="token punctuation">:</span> Double <span class="token keyword keyword-read">read</span> FID <span class="token keyword keyword-write">write</span> FID<span class="token punctuation">;</span>
    <span class="token keyword keyword-property">property</span> <span class="token keyword keyword-Name">Name</span><span class="token punctuation">:</span> <span class="token keyword keyword-String">String</span> <span class="token keyword keyword-read">read</span> FName <span class="token keyword keyword-write">write</span> FName<span class="token punctuation">;</span>
    <span class="token keyword keyword-property">property</span> LastName<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span> <span class="token keyword keyword-read">read</span> FLastName <span class="token keyword keyword-write">write</span> FLastName<span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

  TAPIError <span class="token operator">=</span> <span class="token keyword keyword-class">class</span>
  <span class="token keyword keyword-private">private</span>
    FError<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span><span class="token punctuation">;</span>
  <span class="token keyword keyword-public">public</span>
    <span class="token keyword keyword-property">property</span> Error<span class="token punctuation">:</span> <span class="token keyword keyword-string">string</span> <span class="token keyword keyword-read">read</span> FError <span class="token keyword keyword-write">write</span> FError<span class="token punctuation">;</span>
  <span class="token keyword keyword-end">end</span><span class="token punctuation">;</span>

<span class="token keyword keyword-var">var</span>
  App<span class="token punctuation">:</span> THorse<span class="token punctuation">;</span>

<span class="token keyword keyword-begin">begin</span>
  App <span class="token operator">:=</span> THorse<span class="token punctuation">.</span>Create<span class="token punctuation">;</span>

  <span class="token comment">// Access http://localhost:9000/swagger/doc/html</span>
  App<span class="token punctuation">.</span>Use<span class="token punctuation">(</span>HorseSwagger<span class="token punctuation">)</span><span class="token punctuation">;</span>

  APP<span class="token punctuation">.</span>Get<span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span><span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Res<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  APP<span class="token punctuation">.</span>Post<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span> <span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Resp<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  APP<span class="token punctuation">.</span>Delete<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span>
    <span class="token keyword keyword-procedure">procedure</span> <span class="token punctuation">(</span>Req<span class="token punctuation">:</span> THorseRequest<span class="token punctuation">;</span> Resp<span class="token punctuation">:</span> THorseResponse<span class="token punctuation">;</span> Next<span class="token punctuation">:</span> TProc<span class="token punctuation">)</span>
    <span class="token keyword keyword-begin">begin</span>
    <span class="token keyword keyword-end">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  Swagger
    <span class="token punctuation">.</span>Info
      <span class="token punctuation">.</span>Title<span class="token punctuation">(</span><span class="token string">'Database CRUD Sample'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>Description<span class="token punctuation">(</span><span class="token string">'API Horse'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>Contact
        <span class="token punctuation">.</span><span class="token keyword keyword-Name">Name</span><span class="token punctuation">(</span><span class="token string">'ì‹œê³¨í”„ë¡œê·¸ë˜ë¨¸'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>Email<span class="token punctuation">(</span><span class="token string">'civilian7@email.com'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>URL<span class="token punctuation">(</span><span class="token string">'https://cafe.naver.com/delmadang'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>&amp;End
    <span class="token punctuation">.</span>&amp;End
    <span class="token punctuation">.</span>BasePath<span class="token punctuation">(</span><span class="token string">'v1'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span>Path<span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>Tag<span class="token punctuation">(</span><span class="token string">'User'</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span>GET<span class="token punctuation">(</span><span class="token string">'List All'</span><span class="token punctuation">,</span> <span class="token string">'List All Users'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'successful operation'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span>TUser<span class="token punctuation">)</span>
          <span class="token punctuation">.</span>IsArray<span class="token punctuation">(</span><span class="token keyword keyword-True">True</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span>&amp;End
      <span class="token punctuation">.</span>&amp;End
      <span class="token punctuation">.</span>POST<span class="token punctuation">(</span><span class="token string">'Add user'</span><span class="token punctuation">,</span> <span class="token string">'Add a new user'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>AddParamBody<span class="token punctuation">(</span><span class="token string">'User data'</span><span class="token punctuation">,</span> <span class="token string">'User data'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Required<span class="token punctuation">(</span><span class="token keyword keyword-True">True</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">,</span> <span class="token string">'Created'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span>TUser<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'BadRequest'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span>TAPIError<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span>&amp;End
      <span class="token punctuation">.</span>&amp;End
      <span class="token punctuation">.</span>DELETE<span class="token punctuation">(</span><span class="token string">'Delete user'</span><span class="token punctuation">,</span> <span class="token string">'Delete user'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>AddParamQuery<span class="token punctuation">(</span><span class="token string">'userid'</span><span class="token punctuation">,</span> <span class="token string">'User ID'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Required<span class="token punctuation">(</span><span class="token keyword keyword-True">True</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">201</span><span class="token punctuation">,</span> <span class="token string">'Deleted'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span>TUser<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">'BadRequest'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span>Schema<span class="token punctuation">(</span>TAPIError<span class="token punctuation">)</span>
        <span class="token punctuation">.</span>&amp;End
        <span class="token punctuation">.</span>AddResponse<span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">.</span>&amp;End
      <span class="token punctuation">.</span>&amp;End
    <span class="token punctuation">.</span>&amp;End
  <span class="token punctuation">.</span>&amp;End<span class="token punctuation">;</span>

  <span class="token comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  App<span class="token punctuation">.</span>Listen<span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword keyword-end">end</span><span class="token punctuation">.</span>
</code></pre>
      </div>
      
      
    
    
    <script type="module">
// TODO: If ZenUML gets integrated into mermaid in the future,
//      we can remove the following lines.


var MERMAID_CONFIG = ({"startOnLoad":false});
if (typeof MERMAID_CONFIG !== 'undefined') {
  MERMAID_CONFIG.startOnLoad = false
  MERMAID_CONFIG.cloneCssStyles = false
  MERMAID_CONFIG.theme = "default"
}

mermaid.initialize(MERMAID_CONFIG || {})
if (typeof(window['Reveal']) !== 'undefined') {
  function mermaidRevealHelper(event) {
    var currentSlide = event.currentSlide
    var diagrams = currentSlide.querySelectorAll('.mermaid')
    for (var i = 0; i < diagrams.length; i++) {
      var diagram = diagrams[i]
      if (!diagram.hasAttribute('data-processed')) {
        mermaid.init(null, diagram, ()=> {
          Reveal.slide(event.indexh, event.indexv)
        })
      }
    }
  }
  Reveal.addEventListener('slidetransitionend', mermaidRevealHelper)
  Reveal.addEventListener('ready', mermaidRevealHelper)
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
} else {
  await mermaid.run({
    nodes: document.querySelectorAll('.mermaid')
  })
}
</script>
    
    
    
  
    </body></html>