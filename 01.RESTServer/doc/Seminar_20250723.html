<!DOCTYPE html>
<html>
<head>
<title>Seminar_20250723.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h2 id="%EB%8D%B8%ED%8C%8C%EC%9D%B4-horse%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-rest-%EC%84%9C%EB%B2%84-%EA%B5%AC%ED%98%84-%EC%84%B8%EB%AF%B8%EB%82%98">ë¸íŒŒì´ Horseë¥¼ í™œìš©í•œ REST ì„œë²„ êµ¬í˜„ ì„¸ë¯¸ë‚˜</h2>
<h3 id="0-%EC%84%B8%EB%AF%B8%EB%82%98-%EA%B0%9C%EC%9A%94"><strong>0. ì„¸ë¯¸ë‚˜ ê°œìš”</strong></h3>
<h4 id="01-%EA%B0%9C%EC%9A%94">0.1 ê°œìš”</h4>
<p><strong>ì´ ì†Œìš”ì‹œê°„</strong>: 2ì‹œê°„ (120ë¶„)<br>
<strong>ëŒ€ìƒ</strong>: ë¸íŒŒì´ ê°œë°œ ê²½í—˜ì´ ìˆëŠ” ê°œë°œì<br>
<strong>ëª©í‘œ</strong>: Horse í”„ë ˆì„ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ë¬´ì—ì„œ í™œìš© ê°€ëŠ¥í•œ REST API ì„œë²„ êµ¬ì¶•</p>
<h4 id="02-%ED%95%84%EC%9A%94%ED%95%9C-%EC%82%AC%EC%A0%84-%EC%A4%80%EB%B9%84%EC%82%AC%ED%95%AD">0.2 í•„ìš”í•œ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­</h4>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤: <a href="https://mariadb.org/download/">MariaDB</a></li>
<li>ì¿¼ë¦¬ ë¸Œë¼ìš°ì €: <a href="https://dbeaver.io/download/">DBEaver</a></li>
</ul>
<h4 id="03-%EA%B0%9C%EB%B0%9C-%EB%8F%84%EA%B5%AC">0.3 ê°œë°œ ë„êµ¬</h4>
<ul>
<li>Delphi XE8 ì´ìƒ</li>
</ul>
<h3 id="1-rest-api-%EA%B0%9C%EC%9A%94"><strong>1. REST API ê°œìš”</strong></h3>
<h4 id="11-rest-api%EB%9E%80">1.1 REST APIë€?</h4>
<p><strong>REST API</strong>ëŠ” ì›¹ì—ì„œ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê¸° ìœ„í•œ í‘œì¤€ ê·œì¹™ì…ë‹ˆë‹¤.
ë§ˆì¹˜ ë ˆìŠ¤í† ë‘ì˜ ë©”ë‰´íŒì²˜ëŸ¼, í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì—ê²Œ &quot;ì´ëŸ° ë°ì´í„°ë¥¼ ë‹¬ë¼&quot; ë˜ëŠ” &quot;ì´ëŸ° ì‘ì—…ì„ í•´ë‹¬ë¼&quot;ê³  ìš”ì²­í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ë©°, í†µì‹  í”„ë¡œí† ì½œì€ HTTP/HTTPSë¥¼ ë°ì´í„°ëŠ” JSONì„ ì‚¬ìš©í•©ë‹ˆë‹¤.</p>
<blockquote>
<p><strong>REST</strong> = <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer(í‘œí˜„ ìƒíƒœ ì „ì´)</p>
</blockquote>
<h4 id="12-rest-api%EC%9D%98-%ED%95%B5%EC%8B%AC-%EA%B5%AC%EC%A1%B0">1.2 REST APIì˜ í•µì‹¬ êµ¬ì¡°</h4>
<p>HTTP ë©”ì†Œë“œ + URL = ì‘ì—… ì •ì˜</p>
<table>
  <th width=400px>ìš”ì²­</th>
  <th width=200px>ì˜ë¯¸</th>
  <tr>
    <td>GET /user</td>
    <td>ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>GET /user/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>POST /user</td>
    <td>ìƒˆ ì‚¬ìš©ì ìƒì„±</td>
  </tr>
  <tr>
    <td>PUT /user/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ìˆ˜ì •</td>
  </tr>
  <tr>
    <td>DELETE /user/123</td>
    <td>123ë²ˆ ì‚¬ìš©ì ì‚­ì œ</td>
  </tr>
</table>
<h4 id="13-rest-api%EC%9D%98-5%EA%B0%80%EC%A7%80-%ED%95%B5%EC%8B%AC-%EC%9B%90%EC%B9%99">1.3 REST APIì˜ 5ê°€ì§€ í•µì‹¬ ì›ì¹™</h4>
<h5 id="131-%EB%A6%AC%EC%86%8C%EC%8A%A4-%EC%A4%91%EC%8B%AC-%EC%84%A4%EA%B3%84">1.3.1 ë¦¬ì†ŒìŠ¤ ì¤‘ì‹¬ ì„¤ê³„</h5>
<p>HTTP ë©”ì†Œë“œëŠ” ë™ì‚¬ë¡œ, URLì€ ëª…ì‚¬ë¡œ í‘œí˜„í•œë‹¤</p>
<table>
  <th width=400px>ìš”ì²­</th>
  <th width=200px>ë¹„ê³ </th>
  <tr>
    <td>GET /book/123</td>
    <td>ì¢‹ì€ ì˜ˆ</td>
  </tr>
  <tr>
    <td>GET /getBook/123</td>
    <td>ë‚˜ìœ ì˜ˆ</td>
  </tr>
</table>
<h5 id="132-%EB%AC%B4%EC%83%81%ED%83%9Cstateless">1.3.2 ë¬´ìƒíƒœ(Stateless)</h5>
<p>ì„œë²„ëŠ” ì´ì „ ìš”ì²­ì„ ê¸°ì–µí•˜ì§€ ì•ŠìŒ. ë§¤ ìš”ì²­ë§ˆë‹¤ í•„ìš”í•œ ëª¨ë“  ì •ë³´ í¬í•¨í•´ì•¼ í•œë‹¤</p>
<blockquote>
<p>ë§¤ë²ˆ ì¸ì¦ í† í° í¬í•¨
GET /api/users
Authorization: Bearer abc123token</p>
</blockquote>
<h5 id="133-%ED%91%9C%EC%A4%80-http-%EB%A9%94%EC%86%8C%EB%93%9C-%EC%82%AC%EC%9A%A9">1.3.3 í‘œì¤€ HTTP ë©”ì†Œë“œ ì‚¬ìš©</h5>
<table>
  <th width=400px>ë©”ì†Œë“œ</th>
  <th width=200px>ì˜ë¯¸</th>
  <tr>
    <td>GET</td>
    <td>ì¡°íšŒ</td>
  </tr>
  <tr>
    <td>POST</td>
    <td>ìƒì„±</td>
  </tr>
  <tr>
    <td>PUT</td>
    <td>ìˆ˜ì •</td>
  </tr>
  <tr>
    <td>DELETE</td>
    <td>ì‚­ì œ</td>
  </tr>
</table>
<h5 id="134-%EA%B3%84%EC%B8%B5%ED%99%94%EB%90%9C-%EA%B5%AC%EC%A1%B0">1.3.4 ê³„ì¸µí™”ëœ êµ¬ì¡°</h5>
<p>í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ì˜ ë‚´ë¶€ êµ¬ì¡°ë¥¼ ëª°ë¼ë„ ë¨</p>
<pre><code class="language-mermaid"><div class="mermaid">flowchart TD
    %% í´ë¼ì´ì–¸íŠ¸ ê³„ì¸µ
    A1[ğŸ–¥ï¸ ì›¹ ë¸Œë¼ìš°ì €] --> C[âš–ï¸ ë¡œë“œë°¸ëŸ°ì„œ ]
    A2[ğŸ“± ëª¨ë°”ì¼ ì•±] --> C
    A3[ğŸ’» ë°ìŠ¤í¬í†± ì•±] --> C
    
    %% ë¡œë“œë°¸ëŸ°ì„œì—ì„œ ì„œë²„ë“¤ë¡œ ë¶„ì‚°
    C --> |íŠ¸ë˜í”½ ë¶„ì‚°| D1[ğŸ–¥ï¸ ì„œë²„ 1]
    C --> |íŠ¸ë˜í”½ ë¶„ì‚°| D2[ğŸ–¥ï¸ ì„œë²„ 2]
    C --> |íŠ¸ë˜í”½ ë¶„ì‚°| D3[ğŸ–¥ï¸ ì„œë²„ 3]
    
    %% ì„œë²„ë“¤ì´ ë°ì´í„°ë² ì´ìŠ¤ì— ì ‘ê·¼
    D1 --> E[ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤<br/>RDBMS or NoSQL ]
    D2 --> E
    D3 --> E
    
    %% ìŠ¤íƒ€ì¼ ì •ì˜
    classDef client fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
    classDef gateway fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    classDef loadbalancer fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef server fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef database fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    
    class A1,A2,A3 client
    class B gateway
    class C loadbalancer
    class D1,D2,D3 server
    class E database
</div></code></pre>
<h5 id="135-%EC%BA%90%EC%8B%9C-%EA%B0%80%EB%8A%A5">1.3.5 ìºì‹œ ê°€ëŠ¥</h5>
<p>GET ìš”ì²­ ê²°ê³¼ëŠ” ìºì‹œí•˜ì—¬ ì„±ëŠ¥ í–¥ìƒ</p>
<blockquote>
<p>Cache-Control: max-age=3600
ETag: &quot;abc123&quot;</p>
</blockquote>
<h3 id="2-horse-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%EC%86%8C%EA%B0%9C"><strong>2. HORSE í”„ë ˆì„ì›Œí¬ ì†Œê°œ</strong></h3>
<h4 id="21-horse-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC-%ED%8A%B9%EC%A7%95">2.1 Horse í”„ë ˆì„ì›Œí¬ íŠ¹ì§•</h4>
<h5 id="211-%EA%B2%BD%EB%9F%89%ED%99%94%EC%99%80-%EA%B3%A0%EC%84%B1%EB%8A%A5">2.1.1 ê²½ëŸ‰í™”ì™€ ê³ ì„±ëŠ¥</h5>
<ul>
<li>ë„¤ì´í‹°ë¸Œ ì»´íŒŒì¼</li>
<li>ë©”ëª¨ë¦¬ íš¨ìœ¨ (ë§¤ìš° ì ì€ ë©”ëª¨ë¦¬ë§Œ ì‚¬ìš©í•œë‹¤)</li>
<li>ë¹ ë¥¸ ì‹¤í–‰ ì†ë„</li>
<li>ê²½ëŸ‰í™”ëœ ì›¹ í”„ë ˆì„ì›Œí¬</li>
<li>ê°„ë‹¨í•œ ë¼ìš°íŒ… ì‹œìŠ¤í…œ</li>
</ul>
<h5 id="212-%EA%B0%84%EB%8B%A8%ED%95%98%EA%B3%A0-%EC%A7%81%EA%B4%80%EC%A0%81%EC%9D%B8-%EB%AC%B8%EB%B2%95">2.1.2 ê°„ë‹¨í•˜ê³  ì§ê´€ì ì¸ ë¬¸ë²•</h5>
<ul>
<li>í•™ìŠµ ê³¡ì„ ì´ ë‚®ìŒ</li>
<li>Nodeì˜ Expressì™€ ìœ ì‚¬</li>
<li>ê°€ë…ì„±ì´ ì¢‹ìŒ.</li>
</ul>
<h5 id="213-%EB%8B%A4%EC%96%91%ED%95%98%EA%B3%A0-%EA%B0%95%EB%A0%A5%ED%95%9C-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-%EC%8B%9C%EC%8A%A4%ED%85%9C">2.1.3 ë‹¤ì–‘í•˜ê³  ê°•ë ¥í•œ ë¯¸ë“¤ì›¨ì–´ ì‹œìŠ¤í…œ</h5>
<ul>
<li>ëª¨ë“ˆí™”: ê¸°ëŠ¥ë³„ë¡œ ë¯¸ë“¤ì›¨ì–´ ë¶„ë¦¬</li>
<li>ì¬ì‚¬ìš©ì„±: ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œë„ ë™ì¼í•œ ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©</li>
<li>í™•ì¥ì„±: í•„ìš”í•œ ë¯¸ë“¤ì›¨ì–´ë§Œ ì¶”ê°€/ì œê±° ê°€ëŠ¥</li>
</ul>
<h5 id="214-%EB%8B%A4%EC%96%91%ED%95%9C-os-%EC%A7%80%EC%9B%90">2.1.4 ë‹¤ì–‘í•œ OS ì§€ì›</h5>
<ul>
<li>Windows</li>
<li>Linux</li>
<li>macOS</li>
</ul>
<h5 id="215-%EB%8D%B8%ED%8C%8C%EC%9D%B4-%EC%83%9D%ED%83%9C%EA%B3%84%EC%99%80%EC%9D%98-%ED%86%B5%ED%95%A9">2.1.5 ë¸íŒŒì´ ìƒíƒœê³„ì™€ì˜ í†µí•©</h5>
<ul>
<li>ê¸°ì¡´ ë¸íŒŒì´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
<li>FireDAC, UniDAC ë“± ë‹¤ì–‘í•œ ë°ì´í„°ë² ì´ìŠ¤ ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
</ul>
<h5 id="216-%EA%B0%84%ED%8E%B8%ED%95%9C-%EB%B0%B0%ED%8F%AC%EC%99%80-%EC%9A%B4%EC%98%81">2.1.6 ê°„í¸í•œ ë°°í¬ì™€ ìš´ì˜</h5>
<ul>
<li>ë‹¨ì¼ ì‹¤í–‰íŒŒì¼ë¡œ ë°°í¬ì™€ ìš´ì˜ì´ í¸ë¦¬ (ëŸ°íƒ€ì„ ë¶ˆí•„ìš”)</li>
<li>ë„ì»¤ë¡œ ë°°í¬ ê°€ëŠ¥</li>
<li>í´ë¼ìš°ë“œì— ë°°í¬ ê°€ëŠ¥</li>
</ul>
<h5 id="217-%EB%8B%A4%EB%A5%B8-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EB%93%A4">2.1.7 ë‹¤ë¥¸ í”„ë ˆì„ì›Œí¬ë“¤</h5>
<p><strong>ë¸íŒŒì´ ê¸°ë³¸ ì œê³µ</strong></p>
<ul>
<li><strong>DataSnap</strong> ë˜ëŠ” <strong>WebBroker</strong>
ë¸íŒŒì´ì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•œë‹¤. 12.2ì—ì„œëŠ” ì›¹ìŠ¤í…ì‹¤ì„ ì‚¬ìš©í•´ì„œ í…œí”Œë¦¿ì„ ì‰½ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.</li>
</ul>
<p><strong>ì˜¤í”ˆì†ŒìŠ¤</strong></p>
<ul>
<li><strong>MARS</strong>
<a href="https://github.com/andrea-magni/MARS">https://github.com/andrea-magni/MARS</a></li>
<li><strong>WiRL</strong>
<a href="https://github.com/delphi-blocks/WiRL">https://github.com/delphi-blocks/WiRL</a>
MARSì™€ WiRLì€ ê°™ì€ ë¿Œë¦¬ì—ì„œ ë‚˜ì˜¨ ê²ƒìœ¼ë¡œ ë³´ì´ëŠ”ë° MARSê°€ êµ¬í˜„ëœ ê²ƒì´ ì¡°ê¸ˆ ë” ë§ì§€ë§Œ, WiRLì´ ì½”ë“œëŠ” í›¨ì”¬ ì •ê°ˆí•˜ë‹¤.</li>
<li><strong>DelphiMVCFramework</strong>
<a href="https://github.com/danieleteti/delphimvcframework">https://github.com/danieleteti/delphimvcframework</a>
ê°€ì¥ ì—…ë°ì´íŠ¸ê°€ í™œë°œí•˜ë‹¤. ì†ŒìŠ¤ì½”ë“œ ì •ëˆì´ ì˜ ì•ˆëœì ì€ ì•„ì‰½ë‹¤.</li>
</ul>
<h4 id="22-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C">2.2 ì†ŒìŠ¤ì½”ë“œ ë‹¤ìš´ë¡œë“œ</h4>
<p>ë¸ë§ˆë‹¹ ê³µì‹ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ í´ë¡ í•œë‹¤
<a href="https://github.com/DELMadang/Seminar">ë¸ë§ˆë‹¹ ì„¸ë¯¸ë‚˜ ë¦¬í¬ì§€í† ë¦¬</a></p>
<p>í´ë¡  í›„ í´ë”ì˜ êµ¬ì„±ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.</p>
<pre class="hljs"><code><div>01.RESTServer/
  â”œâ”€â”€ bin                     // ì‹¤í–‰ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” ê³³
  â”œâ”€â”€ database
  â”‚   â””â”€â”€ schema.sql          // MariaDBìš© ìŠ¤í‚¤ë§ˆ
  â”œâ”€â”€ docs
  â”‚   â””â”€â”€ Seminar_20250723.md // í˜„ì¬ ë³´ê³  ìˆëŠ” ë¬¸ì„œ
  â”œâ”€â”€ lib
  â”‚   â”œâ”€â”€ Horse               // Horse ì—”ì§„ ìœ ë‹›ë“¤
  â”‚   â””â”€â”€ MiddleWare          // ë¯¸ë“¤ì›¨ì–´ ìœ ë‹›ë“¤
  â”‚   â””â”€â”€ Swagger             // ìŠ¤ì›¨ê±° ìœ ë‹›ë“¤
  â””â”€â”€ src
      â”œâ”€â”€ 00.Raw              // Indyë¥¼ ì‚¬ìš©í•œ ì„œë²„
      â”œâ”€â”€ 01.Basic            // ê¸°ë³¸ ì„œë²„
      â”œâ”€â”€ 02.MiddleWare       // ë¯¸ë“¤ì›¨ì–´ ì ìš©í•œ ì„œë²„
      â”œâ”€â”€ 03.Database         // ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì„œë²„
      â”œâ”€â”€ 04.Client           // í´ë¼ì´ì–¸íŠ¸
      â””â”€â”€ 99.NodeJS           // NodeJS ì˜ˆì œ
</div></code></pre>
<h4 id="23-indy%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%98%EC%97%AC-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0">2.3 Indyë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•˜ê¸°</h4>
<p>í”„ë ˆì„ì›Œí¬ì˜ ë„ì›€ì—†ì´ ì„œë²„ë¥¼ êµ¬í˜„í•´ ë³´ë©´ì„œ, í”„ë ˆì„ì›Œí¬ì˜ í•„ìš”ì„±ì— ëŒ€í•´ ì•Œì•„ë³¸ë‹¤</p>
<pre class="hljs"><code><div><span class="hljs-keyword">unit</span> uMain;

<span class="hljs-keyword">interface</span>

<span class="hljs-keyword">uses</span>
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,

  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  Vcl.StdCtrls,

  IdContext,
  IdHttp,
  IdCustomHttpServer,
  IdHttpServer;

<span class="hljs-keyword">type</span>
  <span class="hljs-title">TfrmMain</span> = <span class="hljs-keyword">class</span>(TForm)
    ePort: TEdit;
    btnStart: TButton;
    btnStop: TButton;
    btnExecute: TButton;
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">btnExecuteClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">btnStartClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">btnStopClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
  <span class="hljs-keyword">private</span>
    FServer: TIdHttpServer;

    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Start</span><span class="hljs-params">(<span class="hljs-keyword">const</span> APort: Integer = 8080)</span>;</span>
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">Stop</span>;</span>
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TriggerCommandGet</span><span class="hljs-params">(AContext: TIdContext; ARequestInfo:
      TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo)</span>;</span>
  <span class="hljs-keyword">public</span>
    <span class="hljs-function"><span class="hljs-keyword">constructor</span> <span class="hljs-title">Create</span><span class="hljs-params">(AOwner: TComponent)</span>;</span> <span class="hljs-keyword">override</span>;
    <span class="hljs-function"><span class="hljs-keyword">destructor</span> <span class="hljs-title">Destroy</span>;</span> <span class="hljs-keyword">override</span>;
  <span class="hljs-keyword">end</span>;

<span class="hljs-keyword">var</span>
  frmMain: TfrmMain;

<span class="hljs-keyword">implementation</span>

<span class="hljs-meta">{$R *.dfm}</span>

<span class="hljs-keyword">uses</span>
  Winapi.ShellAPI;

<span class="hljs-function"><span class="hljs-keyword">constructor</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">Create</span><span class="hljs-params">(AOwner: TComponent)</span>;</span>
<span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">inherited</span>;

  FServer := TIdHttpServer.Create(Self);
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">destructor</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">Destroy</span>;</span>
<span class="hljs-keyword">begin</span>
  FServer.Active := False;
  FServer.Free;

  <span class="hljs-keyword">inherited</span>;
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">btnExecuteClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
<span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">var</span> LURL := Format(<span class="hljs-string">'http://localhost:%d/hello'</span>, [FServer.Bindings[<span class="hljs-number">0</span>].Port]);
  ShellExecute(<span class="hljs-number">0</span>, <span class="hljs-string">'open'</span>, PChar(LURL), <span class="hljs-keyword">nil</span>, <span class="hljs-keyword">nil</span>, SW_SHOW);
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">btnStartClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
<span class="hljs-keyword">begin</span>
  Start;
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">btnStopClick</span><span class="hljs-params">(Sender: TObject)</span>;</span>
<span class="hljs-keyword">begin</span>
  Stop;
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">Start</span><span class="hljs-params">(<span class="hljs-keyword">const</span> APort: Integer)</span>;</span>
<span class="hljs-keyword">begin</span>
  FServer.Bindings.Clear;

  <span class="hljs-keyword">with</span> FServer.Bindings.Add <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">begin</span>
    IP := <span class="hljs-string">'0.0.0.0'</span>;
    Port := APort;
  <span class="hljs-keyword">end</span>;

  FServer.OnCommandGet := TriggerCommandGet;
  FServer.Active := True;
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">Stop</span>;</span>
<span class="hljs-keyword">begin</span>
  FServer.Active := False;
<span class="hljs-keyword">end</span>;

<span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-title">TfrmMain</span>.<span class="hljs-title">TriggerCommandGet</span><span class="hljs-params">(AContext: TIdContext;
  ARequestInfo: TIdHTTPRequestInfo; AResponseInfo: TIdHTTPResponseInfo)</span>;</span>
<span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> SameText(ARequestInfo.URI, <span class="hljs-string">'/hello'</span>) <span class="hljs-keyword">then</span>
  <span class="hljs-keyword">begin</span>
    AResponseInfo.ContentType := <span class="hljs-string">'application/json'</span>;
    AResponseInfo.ContentText := <span class="hljs-string">'{"response": "Hello, world"}'</span>;
  <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span>;
</div></code></pre>
<h4 id="24-%EA%B8%B0%EB%B3%B8-%EC%84%9C%EB%B2%84-%EA%B5%AC%ED%98%84">2.4 ê¸°ë³¸ ì„œë²„ êµ¬í˜„</h4>
<p>ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ì„œë²„ë¥¼ êµ¬í˜„í•´ ë³´ë©´ì„œ ë¼ìš°í„°ì˜ ì‚¬ìš©ë²•ì— ëŒ€í•´ ìµíŒë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> BasicServer;

<span class="hljs-keyword">uses</span> 
  System.SysUtils,
  Horse;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse.Get(<span class="hljs-string">'/hello'</span>, 
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">Res</span>.<span class="hljs-title">Send</span><span class="hljs-params">(<span class="hljs-string">'Hello World!'</span>)</span>;</span>
    <span class="hljs-keyword">end</span>);
  
  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h3 id="3-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4"><strong>3. ë¯¸ë“¤ì›¨ì–´</strong></h3>
<h4 id="31-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4%EB%9E%80">3.1 ë¯¸ë“¤ì›¨ì–´ë€?</h4>
<ul>
<li>ìš”ì²­-ì‘ë‹µ ì‚¬ì´í´ì—ì„œì˜ ì¤‘ê°„ ì²˜ë¦¬</li>
<li>ê³µì‹ ë¯¸ë“¤ì›¨ì–´
<ul>
<li><strong>horse/json</strong> SON ì²˜ë¦¬ë¥¼ ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</li>
<li><strong>horse/basic-auth</strong> ê¸°ë³¸ ì¸ì¦ì§€ì›</li>
<li><strong>horse/cors</strong> Cross-Origun Resource Sharing ì§€ì›</li>
<li><strong>horse/stream</strong> ë°”ì´ë„ˆë¦¬ ìŠ¤íŠ¸ë¦¼ ì „ì†¡ ì§€ì›</li>
<li><strong>horse/jwt</strong> JWT ì¸ì¦ ì§€ì›</li>
<li><strong>horse/exception</strong> ìµì…‰ì…˜ ì²˜ë¦¬ ì§€ì›</li>
<li><strong>horse/logger</strong> ë¡œê¹… ì§€ì›</li>
<li><strong>horse/compression</strong> ì‘ë‹µ ì••ì¶• ì§€ì›</li>
</ul>
</li>
<li>ë¹„ê³µì‹ ë¯¸ë“¤ì›¨ì–´
<ul>
<li>ì‚¬ìš©ìë“¤ì´ ê°œë°œí•œ ë‹¤ì–‘í•œ ë¯¸ë“¤ì›¨ì–´ê°€ ì¡´ì¬í•˜ë©°</li>
<li>í•„ìš”ì— ë”°ë¼ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì§ì ‘ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤</li>
</ul>
</li>
</ul>
<h4 id="32-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4-%EC%82%AC%EC%9A%A9%ED%95%B4%EB%B3%B4%EA%B8%B0">3.2 ë¯¸ë“¤ì›¨ì–´ ì‚¬ìš©í•´ë³´ê¸°</h4>
<h5 id="321-json-%EB%AF%B8%EB%93%A4%EC%9B%A8%EC%96%B4">3.2.1 JSON ë¯¸ë“¤ì›¨ì–´</h5>
<p>JSON ë¯¸ë“¤ì›¨ì–´ëŠ” ì›¹ ì„œë²„ë‚˜ API ì„œë²„ì—ì„œ JSON ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ íŒŒì‹±í•˜ê³  ì²˜ë¦¬í•˜ëŠ” ì¤‘ê°„ ê³„ì¸µ(middleware) ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.</p>
<p><strong>JSON ë¯¸ë“¤ì›¨ì–´ì˜ ì—­í• </strong></p>
<ul>
<li>ìš”ì²­ ì²˜ë¦¬
HTTP ìš”ì²­ ë³¸ë¬¸ì˜ JSONì„ ìë™ íŒŒì‹±
Content-Type ê²€ì¦ (application/json)
íŒŒì‹± ì—ëŸ¬ ì²˜ë¦¬</li>
<li>ì‘ë‹µ ì²˜ë¦¬
ê°ì²´ë¥¼ JSONìœ¼ë¡œ ìë™ ì§ë ¬í™”
ì ì ˆí•œ Content-Type í—¤ë” ì„¤ì •
JSON í¬ë§·íŒ… (ë“¤ì—¬ì“°ê¸°, ì••ì¶• ë“±)</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> Middlware01;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.JSON,
  Horse,
  Horse.Jhonson;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  THorse.Use(Jhonson());

  <span class="hljs-comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse.Get(<span class="hljs-string">'/hello'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">LResult</span>:</span> TJSONObject;
    <span class="hljs-keyword">begin</span>
      LResult := TJSONObject.Create;
      LResult.AddPair(<span class="hljs-string">'response'</span>, <span class="hljs-string">'Hello, World'</span>);
      Res.Send&lt;TJSONObject&gt;(LResult);
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="322-basic-auth">3.2.2 basic-auth</h5>
<p>Basic Authenticationì€ HTTP í”„ë¡œí† ì½œì—ì„œ ê°€ì¥ ê¸°ë³¸ì ì¸ ì¸ì¦ ë°©ì‹ì…ë‹ˆë‹¤.
Basic Authentication ë™ì‘ ì›ë¦¬</p>
<ol>
<li>ì¸ì½”ë”© ë°©ì‹</li>
</ol>
<ul>
<li>ì‚¬ìš©ìëª…ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì½œë¡ (:)ìœ¼ë¡œ ì—°ê²°</li>
<li>Base64ë¡œ ì¸ì½”ë”©</li>
<li>HTTP í—¤ë”ì— í¬í•¨í•˜ì—¬ ì „ì†¡</li>
</ul>
<pre class="hljs"><code><div>username:password â†’ Base64 ì¸ì½”ë”© â†’ dXNlcm5hbWU6cGFzc3dvcmQ=
</div></code></pre>
<ol start="2">
<li>HTTP í—¤ë” í˜•ì‹</li>
</ol>
<pre class="hljs"><code><div>Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=
</div></code></pre>
<ol start="3">
<li>ë³´ì•ˆ ê³ ë ¤ì‚¬í•­</li>
</ol>
<p><strong>ì¥ì :</strong></p>
<ul>
<li>êµ¬í˜„ì´ ê°„ë‹¨í•¨</li>
<li>ëª¨ë“  HTTP í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì§€ì›</li>
<li>ì„œë²„ ì„¸ì…˜ ìƒíƒœ ë¶ˆí•„ìš”</li>
</ul>
<p><strong>ë‹¨ì :</strong></p>
<ul>
<li>Base64ëŠ” ì•”í˜¸í™”ê°€ ì•„ë‹Œ ì¸ì½”ë”© (ì‰½ê²Œ ë””ì½”ë”© ê°€ëŠ¥)</li>
<li>ë§¤ ìš”ì²­ë§ˆë‹¤ ì¸ì¦ ì •ë³´ ì „ì†¡</li>
<li>ë¸Œë¼ìš°ì €ì— íŒ¨ìŠ¤ì›Œë“œ ì €ì¥ ìœ„í—˜</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> Middlware02;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.JSON,

  Horse,
  Horse.Jhonson,
  Horse.BasicAuthentication;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  THorse.Use(Jhonson());

  <span class="hljs-comment">// BasicAuthë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</span>
  THorse.Use(HorseBasicAuthentication(
    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-keyword">const</span> AUsername, APassword: <span class="hljs-keyword">string</span>)</span>:</span> Boolean
    <span class="hljs-keyword">begin</span>
      Result := AUsername.Equals(<span class="hljs-string">'user'</span>) <span class="hljs-keyword">and</span> APassword.Equals(<span class="hljs-string">'password'</span>);
    <span class="hljs-keyword">end</span>));

  <span class="hljs-comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse.Get(<span class="hljs-string">'/hello'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">LResult</span>:</span> TJSONObject;
    <span class="hljs-keyword">begin</span>
      LResult := TJSONObject.Create;
      LResult.AddPair(<span class="hljs-string">'response'</span>, <span class="hljs-string">'Hello, World'</span>);
      Res.Send&lt;TJSONObject&gt;(LResult);
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<p>ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸ í•˜ê¸°</p>
<pre class="hljs"><code><div>http://user:password@localhost:9000/hello
</div></code></pre>
<h5 id="323-cors">3.2.3 cors</h5>
<p>CORS(Cross-Origin Resource Sharing)ëŠ” ì›¹ ë¸Œë¼ìš°ì €ì˜ Same-Origin Policy(ë™ì¼ ì¶œì²˜ ì •ì±…) ì œí•œì„ ìš°íšŒí•˜ê¸° ìœ„í•´ ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p><strong>Same-Origin Policyë€?</strong>
ì›¹ ë¸Œë¼ìš°ì €ëŠ” ë³´ì•ˆìƒ ì´ìœ ë¡œ ë‹¤ìŒ ì¡°ê±´ì´ ëª¨ë‘ ê°™ì€ ê²½ìš°ì—ë§Œ ë¦¬ì†ŒìŠ¤ ì ‘ê·¼ì„ í—ˆìš©í•©ë‹ˆë‹¤:</p>
<ul>
<li>í”„ë¡œí† ì½œ (http/https)</li>
<li>ë„ë©”ì¸ (example.com)</li>
<li>í¬íŠ¸ (80, 443, 8080 ë“±)</li>
</ul>
<p><strong>CORS ë™ì‘ ê³¼ì •</strong></p>
<ul>
<li>Preflight Request: ë¸Œë¼ìš°ì €ê°€ OPTIONS ìš”ì²­ìœ¼ë¡œ ì„œë²„ì— í—ˆê°€ ìš”ì²­</li>
<li>ì„œë²„ ì‘ë‹µ: í—ˆìš©ëœ origin, ë©”ì„œë“œ, í—¤ë” ì •ë³´ ë°˜í™˜</li>
<li>ì‹¤ì œ ìš”ì²­: í—ˆê°€ë°›ì€ ê²½ìš°ì—ë§Œ ì‹¤ì œ API í˜¸ì¶œ ì‹¤í–‰</li>
</ul>
<p><strong>ì£¼ì˜ì‚¬í•­</strong></p>
<ul>
<li>ë³´ì•ˆ: * (ëª¨ë“  ë„ë©”ì¸ í—ˆìš©)ì€ ìš´ì˜ í™˜ê²½ì—ì„œ ìœ„í—˜</li>
<li>ì„±ëŠ¥: Preflight ìš”ì²­ìœ¼ë¡œ ì¸í•œ ì¶”ê°€ ë„¤íŠ¸ì›Œí¬ ë¹„ìš©</li>
<li>ì„¤ì •: í•„ìš”í•œ originë§Œ ì •í™•íˆ í—ˆìš©í•´ì•¼ í•¨</li>
</ul>
<p>CORSëŠ” ì›¹ ë¸Œë¼ìš°ì €ì—ì„œë§Œ ì ìš©ë˜ëŠ” ì •ì±…ì´ë¯€ë¡œ, ë°ìŠ¤í¬í†± ì• í”Œë¦¬ì¼€ì´ì…˜ì´ë‚˜ ì„œë²„ ê°„ í†µì‹ ì—ëŠ” ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> Middlware03;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.JSON,

  Horse,
  Horse.Jhonson,
  Horse.BasicAuthentication,
  Horse.CORS;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// ë¯¸ë“¤ì›¨ì–´ ë“±ë¡</span>
  HorseCORS
    .AllowedOrigin(<span class="hljs-string">'*'</span>)
    .AllowedCredentials(true)
    .AllowedHeaders(<span class="hljs-string">'*'</span>)
    .AllowedMethods(<span class="hljs-string">'*'</span>)
    .ExposedHeaders(<span class="hljs-string">'*'</span>);

  <span class="hljs-comment">// It's necessary to add the middleware in the Horse:</span>
  THorse.Use(CORS);

  THorse.Use(Jhonson());

  <span class="hljs-comment">// BasicAuthë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ë¯¸ë“¤ì›¨ì–´</span>
  THorse.Use(HorseBasicAuthentication(
    <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-keyword">const</span> AUsername, APassword: <span class="hljs-keyword">string</span>)</span>:</span> Boolean
    <span class="hljs-keyword">begin</span>
      Result := AUsername.Equals(<span class="hljs-string">'user'</span>) <span class="hljs-keyword">and</span> APassword.Equals(<span class="hljs-string">'password'</span>);
    <span class="hljs-keyword">end</span>));

  <span class="hljs-comment">// ë¼ìš°í„°ì— ë“±ë¡í•œë‹¤</span>
  THorse.Get(<span class="hljs-string">'/hello'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">LResult</span>:</span> TJSONObject;
    <span class="hljs-keyword">begin</span>
      LResult := TJSONObject.Create;
      LResult.AddPair(<span class="hljs-string">'response'</span>, <span class="hljs-string">'Hello, World'</span>);
      Res.Send&lt;TJSONObject&gt;(LResult);
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="324-stream">3.2.4 stream</h5>
<p>Streamì„ ë‹¤ë£¨ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ ì›¹ APIì—ì„œ íŒŒì¼ì´ë‚˜ ë°”ì´ë„ˆë¦¬ ë°ì´í„°ë¥¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ì£¼ìš” íŠ¹ì§•</p>
<ul>
<li>íŒŒì¼ ì „ì†¡: PDF, ì´ë¯¸ì§€, ë™ì˜ìƒ ë“± ë‹¤ì–‘í•œ íŒŒì¼ í˜•ì‹ì„ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì „ì†¡</li>
<li>ë©”ëª¨ë¦¬ íš¨ìœ¨ì„±: ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ ë©”ëª¨ë¦¬ì— ëª¨ë‘ ë¡œë“œí•˜ì§€ ì•Šê³  ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ì²˜ë¦¬</li>
<li>Content-Type ì„¤ì •: íŒŒì¼ í˜•ì‹ì— ë§ëŠ” MIME íƒ€ì… ìë™ ì„¤ì •</li>
<li>MIT ë¼ì´ì„ ìŠ¤: ë¬´ë£Œ ì˜¤í”ˆì†ŒìŠ¤</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> Middlware04;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.Classes,
  System.IOUtils,

  Horse,
  Horse.OctetStream;

<span class="hljs-keyword">begin</span>
  THorse.Use(OctetStream);

  THorse.Get(<span class="hljs-string">'/stream'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">LStream</span>:</span> TFileStream;
    <span class="hljs-keyword">begin</span>
      LStream := TFileStream.Create(ExtractFilePath(ParamStr(<span class="hljs-number">0</span>)) + <span class="hljs-string">'horse.pdf'</span>, fmOpenRead);
      Res.Send&lt;TStream&gt;(LStream).ContentType(<span class="hljs-string">'application/pdf'</span>);
    <span class="hljs-keyword">end</span>);

  THorse.Get(<span class="hljs-string">'/download/:filename'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">LPath</span>:</span> <span class="hljs-keyword">string</span>;
      LStream: TFileStream;
    <span class="hljs-keyword">begin</span>
      LPath := TPath.Combine(ExtractFilePath(ParamStr(<span class="hljs-number">0</span>)), Req.Params[<span class="hljs-string">'filename'</span>]);
      <span class="hljs-keyword">if</span> TFile.Exists(LPath) <span class="hljs-keyword">then</span>
      <span class="hljs-keyword">begin</span>
        LStream := TFileStream.Create(LPath, fmOpenRead);
        Res.Send&lt;TStream&gt;(LStream).ContentType(<span class="hljs-string">'application/pdf'</span>);
      <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">begin</span>
        Res.Status(THTTPStatus.NotFound);
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="325-jwt">3.2.5 jwt</h5>
<p>JWTë€?
JWTëŠ” ë‹¹ì‚¬ì ê°„ì— ì •ë³´ë¥¼ JSON ê°ì²´ë¡œ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°œë°©í˜• í‘œì¤€(RFC 7519)ì…ë‹ˆë‹¤. ì£¼ë¡œ **ì¸ì¦(Authentication)**ê³¼ ì •ë³´ êµí™˜ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p>JWT êµ¬ì¡°
JWTëŠ” ì (.)ìœ¼ë¡œ êµ¬ë¶„ëœ ì„¸ ë¶€ë¶„ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:</p>
<pre class="hljs"><code><div>Header.Payload.Signature
</div></code></pre>
<p>1.Header (í—¤ë”)</p>
<ul>
<li>í† í° íƒ€ì…(JWT)ê³¼ í•´ì‹± ì•Œê³ ë¦¬ì¦˜ ì •ë³´</li>
<li>Base64Urlë¡œ ì¸ì½”ë”©</li>
</ul>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"alg"</span>: <span class="hljs-string">"HS256"</span>,
  <span class="hljs-attr">"typ"</span>: <span class="hljs-string">"JWT"</span>
}
</div></code></pre>
<p>2.Payload (í˜ì´ë¡œë“œ)</p>
<ul>
<li>ì‹¤ì œ ì „ì†¡í•  ë°ì´í„°(í´ë ˆì„)</li>
<li>ì‚¬ìš©ì ì •ë³´, ê¶Œí•œ, ë§Œë£Œì‹œê°„ ë“±</li>
</ul>
<pre class="hljs"><code><div>{
  <span class="hljs-attr">"sub"</span>: <span class="hljs-string">"1234567890"</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"John Doe"</span>,
  <span class="hljs-attr">"iat"</span>: <span class="hljs-number">1516239022</span>,
  <span class="hljs-attr">"exp"</span>: <span class="hljs-number">1516242622</span>
}
</div></code></pre>
<p>3.Signature (ì„œëª…)</p>
<ul>
<li>í† í°ì˜ ë¬´ê²°ì„± ê²€ì¦</li>
<li>Header + Payload + Secret Keyë¡œ ìƒì„±</li>
</ul>
<p><strong>ë™ì‘ ë°©ì‹</strong></p>
<ul>
<li>ë¡œê·¸ì¸: ì‚¬ìš©ìê°€ ì¸ì¦ ì •ë³´ ì œê³µ</li>
<li>í† í° ë°œê¸‰: ì„œë²„ê°€ JWT ìƒì„± í›„ í´ë¼ì´ì–¸íŠ¸ì— ì „ì†¡</li>
<li>í† í° ì‚¬ìš©: í´ë¼ì´ì–¸íŠ¸ê°€ ìš”ì²­ ì‹œ JWTë¥¼ Headerì— í¬í•¨</li>
<li>ê²€ì¦: ì„œë²„ê°€ JWT ì„œëª…ì„ ê²€ì¦í•˜ì—¬ ì‚¬ìš©ì ì¸ì¦</li>
</ul>
<p><strong>ì¥ì </strong></p>
<ul>
<li>ìƒíƒœ ì—†ìŒ(Stateless): ì„œë²„ì— ì„¸ì…˜ ì •ë³´ ì €ì¥ ë¶ˆí•„ìš”</li>
<li>í™•ì¥ì„±: ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ í™˜ê²½ì— ì í•©</li>
<li>í¬ë¡œìŠ¤ ë„ë©”ì¸: CORS ë¬¸ì œ í•´ê²°</li>
<li>ëª¨ë°”ì¼ ì¹œí™”ì : ì¿ í‚¤ ëŒ€ì‹  ì‚¬ìš© ê°€ëŠ¥</li>
</ul>
<p><strong>ë‹¨ì </strong></p>
<ul>
<li>í† í° í¬ê¸°: ì¿ í‚¤ë³´ë‹¤ í¬ê¸°ê°€ í¼</li>
<li>ë³´ì•ˆ: í† í° íƒˆì·¨ ì‹œ ë§Œë£Œ ì „ê¹Œì§€ ì‚¬ìš© ê°€ëŠ¥</li>
<li>ì„œë²„ ì¸¡ ë¬´íš¨í™” ì–´ë ¤ì›€: ë¸”ë™ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ í•„ìš”</li>
</ul>
<p><strong>ì£¼ìš” ì‚¬ìš© ì‚¬ë¡€</strong></p>
<ul>
<li>ì¸ì¦/ì¸ê°€: ë¡œê·¸ì¸ í›„ API ì ‘ê·¼ ì œì–´</li>
<li>ì •ë³´ êµí™˜: ì„œë¹„ìŠ¤ ê°„ ì•ˆì „í•œ ë°ì´í„° ì „ì†¡</li>
<li>SSO(Single Sign-On): ì—¬ëŸ¬ ì„œë¹„ìŠ¤ ê°„ ì¸ì¦ ê³µìœ </li>
</ul>
<p>JWTëŠ” í˜„ëŒ€ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í‘œì¤€ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¸ì¦ ë°©ì‹ìœ¼ë¡œ, REST APIë‚˜ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì—ì„œ íŠ¹íˆ ìœ ìš©í•©ë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">uses</span> 
  Horse, 
  Horse.JWT;

<span class="hljs-keyword">begin</span>
  THorse.Use(HorseJWT(<span class="hljs-string">'MY-PASSWORD'</span>)); 

  THorse.Post(<span class="hljs-string">'ping'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">Res</span>.<span class="hljs-title">Send</span><span class="hljs-params">(<span class="hljs-string">'pong'</span>)</span>;</span>
    <span class="hljs-keyword">end</span>);

  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="326-exception">3.2.6 exception</h5>
<p>Handle-exceptionì€ Horse í”„ë ˆì„ì›Œí¬ì—ì„œ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” APIì—ì„œ ë°œìƒí•˜ëŠ” ì˜ˆì™¸ë¥¼ ìë™ìœ¼ë¡œ ìºì¹˜í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì ì ˆí•œ JSON í˜•íƒœì˜ ì˜¤ë¥˜ ì‘ë‹µì„ ë°˜í™˜í•©ë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">uses</span> 
  Horse, 
  Horse.Jhonson, <span class="hljs-comment">// It's necessary to use the unit</span>
  Horse.HandleException, <span class="hljs-comment">// It's necessary to use the unit</span>
  System.JSON;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// It's necessary to add the middlewares in the Horse:</span>
  THorse
    .Use(Jhonson) <span class="hljs-comment">// It has to be before the exceptions middleware</span>
    .Use(HandleException);

  THorse.Post(<span class="hljs-string">'/ping'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-comment">// Manage your exceptions:</span>
      <span class="hljs-title">raise</span> <span class="hljs-title">EHorseException</span>.<span class="hljs-title">New</span>.<span class="hljs-title">Error</span><span class="hljs-params">(<span class="hljs-string">'My Error!'</span>)</span>;</span>
    <span class="hljs-keyword">end</span>);

  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="327-logger">3.2.7 logger</h5>
<p>ê°œë°œëœ APIì˜ ë¡œê·¸ë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” HTTP ìš”ì²­ê³¼ ì‘ë‹µì— ëŒ€í•œ ì ‘ê·¼ ë¡œê·¸ë¥¼ ìë™ìœ¼ë¡œ ê¸°ë¡í•˜ì—¬ APIì˜ ëª¨ë‹ˆí„°ë§ê³¼ ë””ë²„ê¹…ì„ ì§€ì›í•©ë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">uses</span> 
  Horse, 
  Horse.Jhonson, <span class="hljs-comment">// It's necessary to use the unit</span>
  Horse.HandleException, <span class="hljs-comment">// It's necessary to use the unit</span>

<span class="hljs-keyword">begin</span>
  THorse.Use(
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">Writeln</span><span class="hljs-params">(Format(<span class="hljs-string">'[%s] %s %s'</span>, [
        FormatDateTime(<span class="hljs-string">'yyyy-mm-dd hh:nn:ss'</span>, Now)</span>,
        <span class="hljs-title">Req</span>.<span class="hljs-title">Method</span>,
        <span class="hljs-title">Req</span>.<span class="hljs-title">PathInfo</span>
      ]));</span>
      Next();
    <span class="hljs-keyword">end</span>);

  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h5 id="328-compression">3.2.8 compression</h5>
<p>APIì˜ ì½˜í…ì¸ ë¥¼ ì••ì¶•í•˜ê¸° ìœ„í•œ ê³µì‹ ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤. ì´ ë¯¸ë“¤ì›¨ì–´ëŠ” HTTP ì‘ë‹µì„ ìë™ìœ¼ë¡œ ì••ì¶•í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ íŠ¸ë˜í”½ì„ ì¤„ì´ê³  ì „ì†¡ ì†ë„ë¥¼ í–¥ìƒì‹œí‚µë‹ˆë‹¤.</p>
<p>ì§€ì›í•˜ëŠ” ì••ì¶• ë°©ì‹
í˜„ì¬ ë¯¸ë“¤ì›¨ì–´ëŠ” DEFLATEì™€ GZIPì„ ì‚¬ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì••ì¶•í•  ìˆ˜ ìˆë„ë¡ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
<table>
<thead>
<tr>
<th>ì••ì¶• íƒ€ì…</th>
<th>Delphi</th>
<th>Lazarus</th>
</tr>
</thead>
<tbody>
<tr>
<td>DEFLATE</td>
<td>âœ…</td>
<td>âœ…</td>
</tr>
<tr>
<td>GZIP</td>
<td>âœ…</td>
<td>âŒ</td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.JSON,

  Horse,
  Horse.Jhonson,
  Horse.Compression;

<span class="hljs-keyword">begin</span>
  THorse
    .Use(Compression())
    .Use(Jhonson);

  <span class="hljs-comment">// ì¼ì • í¬ê¸° ì´ìƒë§Œ ì••ì¶•í•˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆë‹¤</span>
  <span class="hljs-comment">// THorse.Use(Compression(1024));</span>

  THorse.Get(<span class="hljs-string">'/ping'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">var</span>
      <span class="hljs-title">I</span>:</span> Integer;
      LPong: TJSONArray;
    <span class="hljs-keyword">begin</span>
      LPong := TJSONArray.Create;
      <span class="hljs-keyword">for</span> I := <span class="hljs-number">0</span> <span class="hljs-keyword">to</span> <span class="hljs-number">1000</span> <span class="hljs-keyword">do</span>
        LPong.Add(TJSONObject.Create(TJSONPair.Create(<span class="hljs-string">'ping'</span>, <span class="hljs-string">'pong'</span>)));
      Res.Send(LPong);
    <span class="hljs-keyword">end</span>);

  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h3 id="4-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%97%B0%EB%8F%99-%EC%84%9C%EB%B2%84"><strong>4. ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ ì„œë²„</strong></h3>
<h4 id="41-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EB%B0%8F-%EC%83%98%ED%94%8C-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%83%9D%EC%84%B1">4.1 ë°ì´í„°ë² ì´ìŠ¤ ë° ìƒ˜í”Œ ë°ì´í„° ìƒì„±</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">IF</span> <span class="hljs-keyword">EXISTS</span> <span class="hljs-keyword">users</span>;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">users</span> (
  seq <span class="hljs-built_in">INTEGER</span> AUTO_INCREMENT PRIMARY <span class="hljs-keyword">KEY</span>,
  usr_id <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">12</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  usr_nm <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  usr_pw <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-literal">NULL</span>,
  usr_lvl <span class="hljs-built_in">INTEGER</span>
);
</div></code></pre>
<h4 id="42-firedac-%EC%97%B0%EA%B2%B0-%ED%92%80-%EB%A7%8C%EB%93%A4%EA%B8%B0">4.2 FireDAC ì—°ê²° í’€ ë§Œë“¤ê¸°</h4>
<ul>
<li>ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í’€ì„ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì´ìœ 
<ul>
<li>ì„±ëŠ¥ ì €í•˜</li>
<li>ë¦¬ì†ŒìŠ¤ ë‚­ë¹„</li>
<li>ì—°ê²° í•œê³„ ì´ˆê³¼ì‹œ ë°ì´í„°ë² ì´ìŠ¤ ì„±ëŠ¥ ì €í•˜ ë˜ëŠ” ë‹¤ìš´
MySQL ê¸°ë³¸ max_connections = 151
PostgreSQL ê¸°ë³¸ max_connections = 100</li>
</ul>
</li>
<li>FireDACì€ í’€ë§ì„ ê¸°ë³¸ìœ¼ë¡œ ì§€ì›í•œë‹¤</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">unit</span> uDBPool;

<span class="hljs-keyword">interface</span>

<span class="hljs-meta">{$REGION 'USES'}</span>
<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.Classes,
  System.Generics.Collections,
  System.NetEncoding,

  Data.DB,

  FireDAC.Comp.UI,
  FireDAC.UI.Intf,
  FireDAC.VCLUI.Wait,
  FireDAC.Stan.Def,
  FireDAC.Stan.Intf,
  FireDAC.Stan.Pool,
  FireDAC.Stan.Async,
  FireDAC.Stan.Param,
  FireDAC.DApt,
  FireDAC.Phys.MySQL,
  FireDAC.Comp.Client,
  FireDAC.Comp.Script;
<span class="hljs-meta">{$ENDREGION}</span>

<span class="hljs-keyword">type</span>
  TDatabase = <span class="hljs-keyword">class</span> sealed
  <span class="hljs-keyword">strict</span> <span class="hljs-keyword">private</span>
    <span class="hljs-keyword">const</span>
      CONNECTION_NAME = <span class="hljs-string">'_pooled_connection_'</span>;

    <span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">constructor</span> <span class="hljs-title">Create</span>;</span>
    <span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">destructor</span> <span class="hljs-title">Destroy</span>;</span>
  <span class="hljs-keyword">public</span>
    <span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">function</span>  <span class="hljs-title">GetConnection</span>:</span> TFDConnection; <span class="hljs-keyword">static</span>;
  <span class="hljs-keyword">end</span>;

<span class="hljs-keyword">implementation</span>

<span class="hljs-meta">{$REGION 'TDatabase'}</span>

<span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">constructor</span> <span class="hljs-title">TDatabase</span>.<span class="hljs-title">Create</span>;</span>
<span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">var</span> LParams := TStringList.Create;
  <span class="hljs-keyword">try</span>
    LParams.Add(<span class="hljs-string">'Server=127.0.0.1'</span>);
    LParams.Add(<span class="hljs-string">'Port=3306'</span>);
    LParams.Add(<span class="hljs-string">'Database=pos_db'</span>);
    LParams.Add(<span class="hljs-string">'User_Name=root'</span>);
    LParams.Add(<span class="hljs-string">'Password=1'</span>);
    LParams.Add(<span class="hljs-string">'Pooled=True'</span>);
    LParams.Add(<span class="hljs-string">'CharacterSet=Utf8'</span>);

    FDManager.AddConnectionDef(CONNECTION_NAME, <span class="hljs-string">'MySQL'</span>, LParams);
  <span class="hljs-keyword">finally</span>
    LParams.Free;
  <span class="hljs-keyword">end</span>;
<span class="hljs-keyword">end</span>;

<span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">destructor</span> <span class="hljs-title">TDatabase</span>.<span class="hljs-title">Destroy</span>;</span>
<span class="hljs-keyword">begin</span>
  FDManager.CloseConnectionDef(CONNECTION_NAME);
<span class="hljs-keyword">end</span>;

<span class="hljs-keyword">class</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TDatabase</span>.<span class="hljs-title">GetConnection</span>:</span> TFDConnection;
<span class="hljs-keyword">begin</span>
  Result := TFDConnection.Create(<span class="hljs-keyword">nil</span>);
  Result.ConnectionDefName := CONNECTION_NAME;
  Result.Connected := True;
<span class="hljs-keyword">end</span>;

<span class="hljs-meta">{$ENDREGION}</span>

<span class="hljs-keyword">end</span>.
</div></code></pre>
<h4 id="43-api-%EC%84%A4%EA%B3%84">4.3 API ì„¤ê³„</h4>
<table>
<thead>
<tr>
<th>HTTP ë©”ì†Œë“œ</th>
<th>URL</th>
<th>ë™ì‘</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/api/user</td>
<td>ì „ì²´ ì‚¬ìš©ì ëª©ë¡ ì¡°íšŒ</td>
</tr>
<tr>
<td>GET</td>
<td>/api/user/:id</td>
<td>íŠ¹ì • ì‚¬ìš©ì ì¡°íšŒ</td>
</tr>
<tr>
<td>POST</td>
<td>/api/user</td>
<td>ì‚¬ìš©ì ìƒì„±</td>
</tr>
<tr>
<td>PUT</td>
<td>/api/user/:id</td>
<td>ì‚¬ìš©ì ìˆ˜ì •</td>
</tr>
<tr>
<td>DELETE</td>
<td>/api/user/:id</td>
<td>íŠ¹ì • ì‚¬ìš©ì ì‚­ì œ</td>
</tr>
</tbody>
</table>
<h4 id="44-%EA%B5%AC%ED%98%84">4.4 êµ¬í˜„</h4>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> DBServer;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.Classes,
  System.JSON,

  Data.DB,
  uDBPool,

  Horse;

<span class="hljs-keyword">begin</span>
  <span class="hljs-comment">// ì „ì²´ ì¡°íšŒ</span>
  THorse.Get(<span class="hljs-string">'/user'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">var</span> <span class="hljs-title">LConnection</span> :</span>= TDatabase.GetConnection;
      <span class="hljs-keyword">var</span> LQuery := LConnection.GetQuery;
      <span class="hljs-keyword">try</span>
        LQuery.SQL.Text := <span class="hljs-string">'''
        SELECT
          USR_ID
          , USR_NM
          , USR_LVL
        FROM
          USRS
        '''</span>;
        LQuery.Open;

        Res.ContentType(<span class="hljs-string">'application/json'</span>);
        Res.Send(LQuery.ToJSON);
      <span class="hljs-keyword">finally</span>
        LQuery.Free;
        LConnection.Free;
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// ë‹¨ê±´ ì¡°íšŒ</span>
  THorse.Get(<span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">var</span> <span class="hljs-title">LConnection</span> :</span>= TDatabase.GetConnection;
      <span class="hljs-keyword">var</span> LQuery := LConnection.GetQuery;
      <span class="hljs-keyword">try</span>
        LQuery.SQL.Text := <span class="hljs-string">'''
        SELECT
          USR_ID
          , USR_NM
          , USR_LVL
        FROM
          USRS
        WHERE
          USR_ID = :USR_ID
        '''</span>;
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_ID'</span>).AsString := Req.Params[<span class="hljs-string">'id'</span>];
        LQuery.Open;

        Res.ContentType(<span class="hljs-string">'application/json'</span>);
        Res.Send(LQuery.ToJSON);
      <span class="hljs-keyword">finally</span>
        LQuery.Free;
        LConnection.Free;
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// ì‚­ì œ</span>
  THorse.Delete(<span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">var</span> <span class="hljs-title">LConnection</span> :</span>= TDatabase.GetConnection;
      <span class="hljs-keyword">var</span> LQuery := LConnection.GetQuery;
      <span class="hljs-keyword">try</span>
        LQuery.SQL.Text := <span class="hljs-string">'''
        DELETE
        FROM
          USRS
        WHERE
          USR_ID = :USR_ID
        '''</span>;
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_ID'</span>).AsString := Req.Params[<span class="hljs-string">'id'</span>];
        LQuery.ExecSQL;

        Res.ContentType(<span class="hljs-string">'application/json'</span>);
        Res.Send(<span class="hljs-string">'{"result": "OK"}'</span>);
      <span class="hljs-keyword">finally</span>
        LQuery.Free;
        LConnection.Free;
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// ë“±ë¡</span>
  THorse.Post(<span class="hljs-string">'/user'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">var</span> <span class="hljs-title">LConnection</span> :</span>= TDatabase.GetConnection;
      <span class="hljs-keyword">var</span> LQuery := LConnection.GetQuery;
      <span class="hljs-keyword">try</span>
        LQuery.SQL.Text := <span class="hljs-string">'''
        INSERT INTO USRS
        (
          USR_ID
          , USR_PW
          , USR_NM
          , USR_LVL
        )
        VALUES
        (
          :USR_ID
          , :USR_PW
          , :USR_NM
          , :USR_LVL
        )
        '''</span>;

        <span class="hljs-keyword">var</span> LJSON := TJSONObject.ParseJSONValue(Req.Body) <span class="hljs-keyword">as</span> TJSONObject;
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_ID'</span>).AsString := LJSON.GetValue&lt;<span class="hljs-keyword">string</span>&gt;(<span class="hljs-string">'usr_id'</span>);
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_PW'</span>).AsString := <span class="hljs-string">'1234'</span>;
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_NM'</span>).AsString := LJSON.GetValue&lt;<span class="hljs-keyword">string</span>&gt;(<span class="hljs-string">'usr_nm'</span>);
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_LVL'</span>).AsInteger := LJSON.GetValue&lt;Integer&gt;(<span class="hljs-string">'usr_lvl'</span>);
        LQuery.ExecSQL;
        LJSON.Free;
        Res.ContentType(<span class="hljs-string">'application/json'</span>);
        Res.Send(LQuery.ToJSON);
      <span class="hljs-keyword">finally</span>
        LQuery.Free;
        LConnection.Free;
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// ìˆ˜ì •</span>
  THorse.Put(<span class="hljs-string">'/user/:id'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
      <span class="hljs-title">var</span> <span class="hljs-title">LConnection</span> :</span>= TDatabase.GetConnection;
      <span class="hljs-keyword">var</span> LQuery := LConnection.GetQuery;
      <span class="hljs-keyword">try</span>
        LQuery.SQL.Text := <span class="hljs-string">'''
        UPDATE USRS
        SET
          USR_NM = :USR_NM
          , USR_LVL = :USR_LVL
        WHERE
          USR_ID = :USR_ID
        '''</span>;

        <span class="hljs-keyword">var</span> LJSON := TJSONObject.ParseJSONValue(Req.Body) <span class="hljs-keyword">as</span> TJSONObject;
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_ID'</span>).AsString := Req.Params[<span class="hljs-string">'id'</span>];
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_NM'</span>).AsString := LJSON.GetValue&lt;<span class="hljs-keyword">string</span>&gt;(<span class="hljs-string">'usr_nm'</span>);
        LQuery.Params.ParamByName(<span class="hljs-string">'USR_LVL'</span>).AsInteger := LJSON.GetValue&lt;Integer&gt;(<span class="hljs-string">'usr_lvl'</span>);
        LQuery.ExecSQL;
        LJSON.Free;

        Res.ContentType(<span class="hljs-string">'application/json'</span>);
        Res.Send(LQuery.ToJSON);
      <span class="hljs-keyword">finally</span>
        LQuery.Free;
        LConnection.Free;
      <span class="hljs-keyword">end</span>;
    <span class="hljs-keyword">end</span>);

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  THorse.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>
<h3 id="5-api-%EB%AC%B8%EC%84%9C%ED%99%94%EC%99%80-%ED%85%8C%EC%8A%A4%ED%8A%B8"><strong>5. API ë¬¸ì„œí™”ì™€ í…ŒìŠ¤íŠ¸</strong></h3>
<h4 id="51-swagger%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%B4%EC%84%9C-%EB%AC%B8%EC%84%9C%ED%99%94-%ED%95%98%EA%B8%B0">5.1 Swaggerë¥¼ ì‚¬ìš©í•´ì„œ ë¬¸ì„œí™” í•˜ê¸°</h4>
<p>SWAGGERì˜ íŠ¹ì§•</p>
<ul>
<li>API ë¬¸ì„œí™” ìë™í™”
ì½”ë“œì—ì„œ ì£¼ì„ì´ë‚˜ ì–´ë…¸í…Œì´ì…˜ì„ í†µí•´ API ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ê³  ì—…ë°ì´íŠ¸í•  í•„ìš”ê°€ ì—†ì–´ ê°œë°œ íš¨ìœ¨ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.</li>
<li>OpenAPI ì‚¬ì–‘ ì¤€ìˆ˜
OpenAPI Specification(OAS)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ í‘œì¤€í™”ëœ ë°©ì‹ìœ¼ë¡œ REST APIë¥¼ ì •ì˜í•˜ê³  ë¬¸ì„œí™”í•©ë‹ˆë‹¤.</li>
<li>ì¸í„°ë™í‹°ë¸Œ ë¬¸ì„œ
Swagger UIë¥¼ í†µí•´ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ APIë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆëŠ” ëŒ€í™”í˜• ë¬¸ì„œë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì‹¤ì œ API í˜¸ì¶œì„ í•´ë³´ë©´ì„œ ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ì½”ë“œ ìƒì„±
API ì‚¬ì–‘ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í´ë¼ì´ì–¸íŠ¸ SDK, ì„œë²„ ìŠ¤í… ì½”ë“œ ë“±ì„ ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ìë™ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>API ì„¤ê³„ ìš°ì„  ê°œë°œ
ì½”ë“œ ì‘ì„± ì „ì— APIë¥¼ ë¨¼ì € ì„¤ê³„í•˜ê³  ë¬¸ì„œí™”í•˜ì—¬ íŒ€ ê°„ í˜‘ì—…ê³¼ API ì¼ê´€ì„±ì„ ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>
<li>ë‹¤ì–‘í•œ ë„êµ¬ ì§€ì›
Swagger Editor, Swagger UI, Swagger Codegen ë“± ë‹¤ì–‘í•œ ë„êµ¬ë“¤ì´ API ê°œë°œ ìƒëª…ì£¼ê¸° ì „ë°˜ì„ ì§€ì›í•©ë‹ˆë‹¤.</li>
</ul>
<p>ì´ëŸ¬í•œ íŠ¹ì§•ë“¤ë¡œ ì¸í•´ SwaggerëŠ” í˜„ì¬ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” API ë¬¸ì„œí™” ë° ê°œë°œ ë„êµ¬ ì¤‘ í•˜ë‚˜ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<pre class="hljs"><code><div><span class="hljs-keyword">program</span> Middlware05;

<span class="hljs-meta">{$APPTYPE CONSOLE}</span>

<span class="hljs-keyword">uses</span>
  System.SysUtils,
  System.Classes,

  Horse,
  Horse.GBSwagger;

<span class="hljs-keyword">type</span>
  TUser = <span class="hljs-keyword">class</span>
  <span class="hljs-keyword">private</span>
    FID: Double;
    FName: <span class="hljs-keyword">String</span>;
    FLastName: <span class="hljs-keyword">string</span>;
  <span class="hljs-keyword">public</span>
    <span class="hljs-keyword">property</span> ID: Double <span class="hljs-keyword">read</span> FID <span class="hljs-keyword">write</span> FID;
    <span class="hljs-keyword">property</span> <span class="hljs-keyword">Name</span>: <span class="hljs-keyword">String</span> <span class="hljs-keyword">read</span> FName <span class="hljs-keyword">write</span> FName;
    <span class="hljs-keyword">property</span> LastName: <span class="hljs-keyword">string</span> <span class="hljs-keyword">read</span> FLastName <span class="hljs-keyword">write</span> FLastName;
  <span class="hljs-keyword">end</span>;

  TAPIError = <span class="hljs-keyword">class</span>
  <span class="hljs-keyword">private</span>
    FError: <span class="hljs-keyword">string</span>;
  <span class="hljs-keyword">public</span>
    <span class="hljs-keyword">property</span> Error: <span class="hljs-keyword">string</span> <span class="hljs-keyword">read</span> FError <span class="hljs-keyword">write</span> FError;
  <span class="hljs-keyword">end</span>;

<span class="hljs-keyword">var</span>
  App: THorse;

<span class="hljs-keyword">begin</span>
  App := THorse.Create;

  <span class="hljs-comment">// Access http://localhost:9000/swagger/doc/html</span>
  App.Use(HorseSwagger);

  APP.Get(<span class="hljs-string">'/user'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span><span class="hljs-params">(Req: THorseRequest; Res: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
    <span class="hljs-title">end</span>);</span>

  APP.Post(<span class="hljs-string">'user'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-params">(Req: THorseRequest; Resp: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
    <span class="hljs-title">end</span>);</span>

  APP.Delete(<span class="hljs-string">'user'</span>,
    <span class="hljs-function"><span class="hljs-keyword">procedure</span> <span class="hljs-params">(Req: THorseRequest; Resp: THorseResponse; Next: TProc)</span>
    <span class="hljs-title">begin</span>
    <span class="hljs-title">end</span>);</span>

  Swagger
    .Info
      .Title(<span class="hljs-string">'Database CRUD Sample'</span>)
      .Description(<span class="hljs-string">'API Horse'</span>)
      .Contact
        .<span class="hljs-keyword">Name</span>(<span class="hljs-string">'ì‹œê³¨í”„ë¡œê·¸ë˜ë¨¸'</span>)
        .Email(<span class="hljs-string">'civilian7@email.com'</span>)
        .URL(<span class="hljs-string">'https://cafe.naver.com/delmadang'</span>)
      .&amp;<span class="hljs-keyword">End</span>
    .&amp;<span class="hljs-keyword">End</span>
    .BasePath(<span class="hljs-string">'v1'</span>)
    .Path(<span class="hljs-string">'user'</span>)
      .Tag(<span class="hljs-string">'User'</span>)
      .GET(<span class="hljs-string">'List All'</span>, <span class="hljs-string">'List All Users'</span>)
        .AddResponse(<span class="hljs-number">200</span>, <span class="hljs-string">'successful operation'</span>)
          .Schema(TUser)
          .IsArray(True)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">400</span>).&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">500</span>).&amp;<span class="hljs-keyword">End</span>
      .&amp;<span class="hljs-keyword">End</span>
      .POST(<span class="hljs-string">'Add user'</span>, <span class="hljs-string">'Add a new user'</span>)
        .AddParamBody(<span class="hljs-string">'User data'</span>, <span class="hljs-string">'User data'</span>)
          .Required(True)
          .Schema(<span class="hljs-string">'string'</span>)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">201</span>, <span class="hljs-string">'Created'</span>)
          .Schema(TUser)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">400</span>, <span class="hljs-string">'BadRequest'</span>)
          .Schema(TAPIError)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">500</span>).&amp;<span class="hljs-keyword">End</span>
      .&amp;<span class="hljs-keyword">End</span>
      .DELETE(<span class="hljs-string">'Delete user'</span>, <span class="hljs-string">'Delete user'</span>)
        .AddParamQuery(<span class="hljs-string">'userid'</span>, <span class="hljs-string">'User ID'</span>)
          .Required(True)
          .Schema(<span class="hljs-string">'string'</span>)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">201</span>, <span class="hljs-string">'Deleted'</span>)
          .Schema(TUser)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">400</span>, <span class="hljs-string">'BadRequest'</span>)
          .Schema(TAPIError)
        .&amp;<span class="hljs-keyword">End</span>
        .AddResponse(<span class="hljs-number">500</span>).&amp;<span class="hljs-keyword">End</span>
      .&amp;<span class="hljs-keyword">End</span>
    .&amp;<span class="hljs-keyword">End</span>
  .&amp;<span class="hljs-keyword">End</span>;

  <span class="hljs-comment">// 9000ë²ˆ í¬íŠ¸ë¥¼ ë¦¬ìŠ¤ë‹í•œë‹¤</span>
  App.Listen(<span class="hljs-number">9000</span>);
<span class="hljs-keyword">end</span>.
</div></code></pre>

</body>
</html>
